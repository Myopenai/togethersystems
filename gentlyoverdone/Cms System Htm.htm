<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Builder - Vollst√§ndig Funktional</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            height: 100vh;
            overflow: hidden;
        }

        .container {
            display: flex;
            height: 100vh;
        }

        .sidebar {
            width: 300px;
            background: rgba(255, 255, 255, 0.1);
            border-right: 1px solid rgba(255, 255, 255, 0.2);
            padding: 20px;
            overflow-y: auto;
        }

        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .toolbar {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }

        .toolbar-section {
            display: flex;
            gap: 8px;
            align-items: center;
            padding: 0 10px;
            border-right: 1px solid rgba(255, 255, 255, 0.2);
        }

        .toolbar-section:last-child {
            border-right: none;
        }

        .toolbar button {
            background: linear-gradient(135deg, #4f46e5, #6366f1);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            white-space: nowrap;
        }

        .toolbar button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(79, 70, 229, 0.3);
        }

        .canvas-container {
            flex: 1;
            position: relative;
            overflow: auto;
            padding: 20px;
            min-height: 0; /* Flexbox Overflow Fix */
        }

        #canvas {
            width: 100%;
            min-height: 500px;
            background: rgba(255, 255, 255, 0.05);
            border: 3px dashed rgba(79, 70, 229, 0.5);
            border-radius: 16px;
            position: relative;
            transition: all 0.3s ease;
            cursor: crosshair;
            overflow: visible;
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.1);
            /* height: 100% entfernt - verursacht Fixed Height Lock */
        }

        .canvas-placeholder {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: rgba(255, 255, 255, 0.6);
            font-size: 18px;
            text-align: center;
            pointer-events: none;
        }

        .component-item {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            cursor: grab;
            transition: all 0.3s ease;
            user-select: none;
        }

        .component-item:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        .component-item:active {
            cursor: grabbing;
        }

        .component-icon {
            font-size: 24px;
            margin-bottom: 8px;
        }

        .component-name {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .component-desc {
            font-size: 12px;
            opacity: 0.8;
        }

        .canvas-component {
            position: absolute;
            background: white;
            border: 2px solid #4f46e5;
            border-radius: 8px;
            min-width: 100px;
            min-height: 50px;
            cursor: move;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            resize: both;
            overflow: visible; /* auto ‚Üí visible f√ºr bessere Scroll-Behandlung */
            animation: fadeIn 0.3s ease-out;
            /* Z-Index f√ºr bessere Layering */
            z-index: 1;
        }

        .canvas-component:hover {
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            transform: scale(1.02);
        }

        .canvas-component.selected {
            border-color: #10b981;
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.3);
        }

        .component-header {
            background: #4f46e5;
            color: white;
            padding: 8px 12px;
            border-radius: 6px 6px 0 0;
            font-size: 12px;
            font-weight: 500;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: move;
        }

        .component-content {
            padding: 15px;
            color: #333;
            min-height: 30px;
        }

        .component-actions {
            display: flex;
            gap: 5px;
        }

        .component-action {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s ease;
        }

        .component-action:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .tab-buttons {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .tab-button {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.7);
            padding: 10px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 2px solid transparent;
        }

        .tab-button.active {
            color: white;
            border-bottom-color: #4f46e5;
        }

        .tab-button:hover {
            color: white;
            background: rgba(255, 255, 255, 0.1);
        }
        
        /* Quick Menu Styles */
        .quick-menu {
            position: fixed;
            left: -300px;
            top: 50%;
            transform: translateY(-50%);
            background: linear-gradient(135deg, #1e40af, #3b82f6);
            color: white;
            padding: 20px;
            border-radius: 0 12px 12px 0;
            box-shadow: 4px 0 20px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            transition: all 0.3s ease;
            max-height: 80vh;
            overflow-y: auto;
            width: 280px;
        }
        
        .quick-menu.show {
            left: 0;
            transform: translateY(-50%);
        }
        
        .quick-menu-toggle {
            position: fixed;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            background: linear-gradient(135deg, #1e40af, #3b82f6);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            z-index: 999;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }
        
        .quick-menu-toggle:hover {
            transform: translateY(-50%) scale(1.1);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
        }
        
        .quick-menu-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            padding-bottom: 10px;
        }
        
        .quick-menu h3 {
            margin: 0;
            font-size: 16px;
            text-align: center;
            flex: 1;
        }
        
        .quick-menu-close {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .quick-menu-close:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }
        
        .quick-component-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            margin-bottom: 8px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }
        
        .quick-component-item:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.4);
            transform: translateX(5px);
        }
        
        .quick-component-item:active {
            transform: translateX(5px) scale(0.95);
        }
        
        .quick-component-item .icon {
            font-size: 18px;
            width: 20px;
            text-align: center;
        }
        
        .quick-component-item span:last-child {
            white-space: nowrap;
        }
        
        /* Template Styles */
        .template-item {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            user-select: none;
        }
        
        .template-item:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        
        .template-icon {
            font-size: 24px;
            margin-bottom: 8px;
        }
        
        .template-name {
            font-weight: 600;
            margin-bottom: 4px;
        }
        
        .template-desc {
            font-size: 12px;
            opacity: 0.8;
        }
        
        /* Settings Styles */
        .setting-group {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .setting-item {
            margin-bottom: 15px;
        }
        
        .setting-item label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: rgba(255, 255, 255, 0.9);
        }
        
        .setting-item input,
        .setting-item select {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 14px;
        }
        
        .setting-item input:focus,
        .setting-item select:focus {
            outline: none;
            border-color: #4f46e5;
            box-shadow: 0 0 0 2px rgba(79, 70, 229, 0.3);
        }
        
        .setting-item input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        
        /* Vollansicht Styles */
        .full-canvas {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100vw !important;
            height: 100vh !important;
            z-index: 9999 !important;
            background: white !important;
            overflow: auto !important;
            border: none !important;
            border-radius: 0 !important;
            margin: 0 !important;
            padding: 20px !important;
        }

        /* Image Upload Styles */
        .image-upload-area {
            border: 2px dashed #4f46e5;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            background: rgba(79, 70, 229, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .image-upload-area:hover {
            background: rgba(79, 70, 229, 0.2);
            border-color: #6366f1;
        }

        .image-upload-area.dragover {
            background: rgba(79, 70, 229, 0.3);
            border-color: #10b981;
        }

        .image-preview {
            max-width: 100%;
            max-height: 200px;
            border-radius: 8px;
            margin-top: 10px;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 10000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 20px;
            border-radius: 12px;
            width: 80%;
            max-width: 600px;
            color: #333;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
        }

        .modal-close:hover {
            color: #333;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #4f46e5;
            box-shadow: 0 0 0 2px rgba(79, 70, 229, 0.2);
        }

        .btn {
            background: linear-gradient(135deg, #4f46e5, #6366f1);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(79, 70, 229, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #6b7280, #9ca3af);
        }

        .btn-success {
            background: linear-gradient(135deg, #10b981, #059669);
        }

        .btn-danger {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }

        .btn-group {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 20px;
        }
        
        /* Erweiterte CSS-Features */
        .file-drop-over {
            background: rgba(79, 70, 229, 0.2) !important;
            border-color: #10b981 !important;
        }
        
        .drag-over {
            background: rgba(79, 70, 229, 0.1) !important;
            border-color: #4f46e5 !important;
        }
        
        /* Responsive Design Verbesserungen */
        @media (max-width: 768px) {
            .sidebar {
                width: 250px;
            }
            
            .toolbar {
                flex-direction: column;
                gap: 5px;
            }
            
            .toolbar-section {
                border-right: none;
                border-bottom: 1px solid rgba(255, 255, 255, 0.2);
                padding: 10px 0;
            }
            
            .toolbar-section:last-child {
                border-bottom: none;
            }
            
            .quick-menu {
                width: 250px;
                left: -250px;
            }
            
            .quick-menu.show {
                left: 0;
            }
        }
        
        @media (max-width: 480px) {
            .sidebar {
                width: 200px;
                padding: 15px;
            }
            
            .toolbar button {
                padding: 8px 12px;
                font-size: 12px;
            }
            
            .canvas-component {
                min-width: 80px;
                min-height: 40px;
            }
        }
        
        /* Animationen f√ºr bessere UX */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .canvas-component {
            animation: fadeIn 0.3s ease-out;
        }
        
        /* Verbesserte Hover-Effekte */
        .component-item:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        
        .template-item:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        
        /* Verbesserte Scrollbars */
        .sidebar::-webkit-scrollbar,
        .canvas-container::-webkit-scrollbar {
            width: 8px;
        }
        
        .sidebar::-webkit-scrollbar-track,
        .canvas-container::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }
        
        .sidebar::-webkit-scrollbar-thumb,
        .canvas-container::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 4px;
        }
        
        .sidebar::-webkit-scrollbar-thumb:hover,
        .canvas-container::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.5);
        }
        
        /* Komponenten-Toolbar Styles */
        .component-toolbar {
            animation: slideInRight 0.3s ease-out;
        }
        
        .component-toolbar button {
            transition: all 0.2s ease;
        }
        
        .component-toolbar button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        
        /* Verbesserte Form-Styles */
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #333;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            transition: border-color 0.2s ease;
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #4f46e5;
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }
        
        /* Verbesserte Button-Styles */
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            margin: 0 5px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        
        .btn-success {
            background: #10b981;
            color: white;
        }
        
        .btn-secondary {
            background: #6b7280;
            color: white;
        }
        
        .btn-danger {
            background: #ef4444;
            color: white;
        }
        
        /* Modal Styles for CMS Features */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 16px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }
        
        .modal-header {
            padding: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-header h3 {
            margin: 0;
            font-size: 1.5rem;
        }
        
        .modal-close {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-body {
            padding: 20px;
        }
        
        .content-type-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .workflow-statuses {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .status-item {
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
        }
        
        .status-item.draft { background: #6b7280; }
        .status-item.review { background: #f59e0b; }
        .status-item.approved { background: #10b981; }
        .status-item.published { background: #3b82f6; }
        
        .languages-list {
            margin-top: 15px;
        }
        
        .language-item {
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            margin-bottom: 8px;
            border-radius: 6px;
        }
        
        .navigation-tree {
            margin-top: 15px;
        }
        
        .nav-item {
            padding: 8px 12px;
            background: rgba(255, 255, 255, 0.1);
            margin-bottom: 5px;
            border-radius: 4px;
        }
        
        .search-input {
            width: 100%;
            padding: 10px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 6px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            margin-bottom: 15px;
        }
        
        .search-input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }
        
        .performance-metrics {
            margin-top: 15px;
        }
        
        .metric {
            padding: 8px 12px;
            background: rgba(255, 255, 255, 0.1);
            margin-bottom: 8px;
            border-radius: 6px;
        }
    </style>
</head>
<body>
    <!-- Quick Menu Toggle Button -->
    <button class="quick-menu-toggle" onclick="toggleQuickMenu()" title="Komponenten-Men√º √∂ffnen/schlie√üen">
        üöÄ
    </button>
    
    <!-- Fixed Left Sidebar Quick Menu -->
    <div class="quick-menu" id="quickMenu">
        <div class="quick-menu-header">
            <h3>üöÄ Schnell-Komponenten</h3>
            <button class="quick-menu-close" onclick="toggleQuickMenu()">‚úï</button>
        </div>
        <div class="quick-component-item" onclick="addComponentAtCenter('heading')">
            <span class="icon">üìù</span>
            <span>√úberschrift</span>
        </div>
        <div class="quick-component-item" onclick="addComponentAtCenter('paragraph')">
            <span class="icon">üìÑ</span>
            <span>Absatz</span>
        </div>
        <div class="quick-component-item" onclick="addComponentAtCenter('button')">
            <span class="icon">üîò</span>
            <span>Button</span>
        </div>
        <div class="quick-component-item" onclick="addComponentAtCenter('image')">
            <span class="icon">üñºÔ∏è</span>
            <span>Bild</span>
        </div>
        <div class="quick-component-item" onclick="addComponentAtCenter('container')">
            <span class="icon">üì¶</span>
            <span>Container</span>
        </div>
        <div class="quick-component-item" onclick="addComponentAtCenter('form')">
            <span class="icon">üìã</span>
            <span>Formular</span>
        </div>
        <div class="quick-component-item" onclick="addComponentAtCenter('card')">
            <span class="icon">üÉè</span>
            <span>Karte</span>
        </div>
        <div class="quick-component-item" onclick="addComponentAtCenter('gallery')">
            <span class="icon">üñºÔ∏è</span>
            <span>Galerie</span>
        </div>
        <div class="quick-component-item" onclick="addComponentAtCenter('formit')">
            <span class="icon">üìù</span>
            <span>FormIt</span>
        </div>
        <div class="quick-component-item" onclick="addComponentAtCenter('seo')">
            <span class="icon">üîç</span>
            <span>SEO Pro</span>
        </div>
        <div class="quick-component-item" onclick="addComponentAtCenter('blog')">
            <span class="icon">üì∞</span>
            <span>Blog</span>
        </div>
        <div class="quick-component-item" onclick="addComponentAtCenter('calendar')">
            <span class="icon">üìÖ</span>
            <span>Calendar</span>
        </div>
        <div class="quick-component-item" onclick="addComponentAtCenter('search')">
            <span class="icon">üîé</span>
            <span>Search</span>
        </div>
        <div class="quick-component-item" onclick="addComponentAtCenter('social')">
            <span class="icon">üì±</span>
            <span>Social Media</span>
        </div>
        <div class="quick-component-item" onclick="addComponentAtCenter('map')">
            <span class="icon">üó∫Ô∏è</span>
            <span>Google Maps</span>
        </div>
        <div class="quick-component-item" onclick="addComponentAtCenter('video')">
            <span class="icon">üé•</span>
            <span>Video Player</span>
        </div>
        <div class="quick-component-item" onclick="addComponentAtCenter('slider')">
            <span class="icon">üñºÔ∏è</span>
            <span>Slider</span>
        </div>
        <div class="quick-component-item" onclick="addComponentAtCenter('ecommerce')">
            <span class="icon">üõí</span>
            <span>E-Commerce</span>
        </div>
        <div class="quick-component-item" onclick="addComponentAtCenter('newsletter')">
            <span class="icon">üìß</span>
            <span>Newsletter</span>
        </div>
        <div class="quick-component-item" onclick="addComponentAtCenter('chat')">
            <span class="icon">üí¨</span>
            <span>Live Chat</span>
        </div>
        <div class="quick-component-item" onclick="addComponentAtCenter('analytics')">
            <span class="icon">üìä</span>
            <span>Analytics</span>
        </div>
        <div class="quick-component-item" onclick="addComponentAtCenter('multilang')">
            <span class="icon">üåê</span>
            <span>Mehrsprachigkeit</span>
        </div>
        <div class="quick-component-item" onclick="addComponentAtCenter('workflow')">
            <span class="icon">‚öôÔ∏è</span>
            <span>Workflow</span>
        </div>
    </div>
    
    <div class="container">
        <div class="sidebar">
            <div class="tab-buttons">
                <button class="tab-button active" onclick="showTab('components')">Komponenten</button>
                <button class="tab-button" onclick="showTab('templates')">Templates</button>
                <button class="tab-button" onclick="showTab('settings')">Einstellungen</button>
            </div>

            <!-- Komponenten Tab -->
            <div id="components-tab" class="tab-content active">
                <h4 style="color: #4f46e5; margin-bottom: 15px; border-bottom: 1px solid rgba(255,255,255,0.2); padding-bottom: 8px;">
                    üìù Grundlegende Komponenten
                    <a href="javascript:void(0)" onclick="showSystemInfo()" style="float: right; font-size: 12px; color: #e0e7ff; text-decoration: none; background: rgba(255,255,255,0.1); padding: 4px 8px; border-radius: 4px; transition: all 0.3s ease;" title="System-Informationen anzeigen">‚ÑπÔ∏è Info</a>
                </h4>
                
                <div class="component-item" draggable="true" data-type="heading">
                    <div class="component-icon">üìù</div>
                    <div class="component-name">√úberschrift</div>
                    <div class="component-desc">H1, H2, H3, etc.</div>
                </div>
                <div class="component-item" draggable="true" data-type="paragraph">
                    <div class="component-icon">üìÑ</div>
                    <div class="component-name">Absatz</div>
                    <div class="component-desc">Text Abs√§tze</div>
                </div>
                <div class="component-item" draggable="true" data-type="button">
                    <div class="component-icon">üîò</div>
                    <div class="component-name">Button</div>
                    <div class="component-desc">Klickbare Buttons</div>
                </div>
                <div class="component-item" draggable="true" data-type="image">
                    <div class="component-icon">üñºÔ∏è</div>
                    <div class="component-name">Bild</div>
                    <div class="component-desc">Bilder &amp; Medien</div>
                </div>
                <div class="component-item" draggable="true" data-type="container">
                    <div class="component-icon">üì¶</div>
                    <div class="component-name">Container</div>
                    <div class="component-desc">Gruppierung von Elementen</div>
                </div>
                <div class="component-item" draggable="true" data-type="form">
                    <div class="component-icon">üìã</div>
                    <div class="component-name">Formular</div>
                    <div class="component-desc">Eingabefelder &amp; Buttons</div>
                </div>
                
                <h4 style="color: #4f46e5; margin: 25px 0 15px 0; border-bottom: 1px solid rgba(255,255,255,0.2); padding-bottom: 8px;">üîÑ MODX Extras &amp; Add-ons</h4>
                
                <div class="component-item" draggable="true" data-type="formit">
                    <div class="component-icon">üìù</div>
                    <div class="component-name">FormIt</div>
                    <div class="component-desc">Kontaktformular &amp; Validierung</div>
                </div>
                <div class="component-item" draggable="true" data-type="gallery">
                    <div class="component-icon">üñºÔ∏è</div>
                    <div class="component-name">Gallery</div>
                    <div class="component-desc">Bildergalerie &amp; Lightbox</div>
                </div>
                <div class="component-item" draggable="true" data-type="seo">
                    <div class="component-icon">üîç</div>
                    <div class="component-name">SEO Pro</div>
                    <div class="component-desc">Meta-Tags &amp; Optimierung</div>
                </div>
                <div class="component-item" draggable="true" data-type="blog">
                    <div class="component-icon">üì∞</div>
                    <div class="component-name">Blog</div>
                    <div class="component-desc">Artikel &amp; Kategorien</div>
                </div>
                <div class="component-item" draggable="true" data-type="calendar">
                    <div class="component-icon">üìÖ</div>
                    <div class="component-name">Calendar</div>
                    <div class="component-desc">Termine &amp; Events</div>
                </div>
                <div class="component-item" draggable="true" data-type="search">
                    <div class="component-icon">üîé</div>
                    <div class="component-name">Search</div>
                    <div class="component-desc">Suche &amp; Filter</div>
                </div>
                
                <h4 style="color: #4f46e5; margin: 25px 0 15px 0; border-bottom: 1px solid rgba(255,255,255,0.2); padding-bottom: 8px;">‚ö° Erweiterte Widgets</h4>
                
                <div class="component-item" draggable="true" data-type="social">
                    <div class="component-icon">üì±</div>
                    <div class="component-name">Social Media</div>
                    <div class="component-desc">Teilen &amp; Follow Buttons</div>
                </div>
                <div class="component-item" draggable="true" data-type="map">
                    <div class="component-icon">üó∫Ô∏è</div>
                    <div class="component-name">Google Maps</div>
                    <div class="component-desc">Standort &amp; Navigation</div>
                </div>
                <div class="component-item" draggable="true" data-type="video">
                    <div class="component-icon">üé•</div>
                    <div class="component-name">Video Player</div>
                    <div class="component-desc">YouTube &amp; Vimeo</div>
                </div>
                <div class="component-item" draggable="true" data-type="slider">
                    <div class="component-icon">üñºÔ∏è</div>
                    <div class="component-name">Slider</div>
                    <div class="component-desc">Bildkarussell &amp; Slides</div>
                </div>
                
                <h4 style="color: #4f46e5; margin: 25px 0 15px 0; border-bottom: 1px solid rgba(255,255,255,0.2); padding-bottom: 8px;">üöÄ Enterprise Features</h4>
                
                <div class="component-item" draggable="true" data-type="ecommerce">
                    <div class="component-icon">üõí</div>
                    <div class="component-name">E-Commerce</div>
                    <div class="component-desc">Produktkatalog &amp; Shop</div>
                </div>
                <div class="component-item" draggable="true" data-type="newsletter">
                    <div class="component-icon">üìß</div>
                    <div class="component-name">Newsletter</div>
                    <div class="component-desc">E-Mail Marketing</div>
                </div>
                <div class="component-item" draggable="true" data-type="chat">
                    <div class="component-icon">üí¨</div>
                    <div class="component-name">Live Chat</div>
                    <div class="component-desc">Kundensupport</div>
                </div>
                <div class="component-item" draggable="true" data-type="analytics">
                    <div class="component-icon">üìä</div>
                    <div class="component-name">Analytics</div>
                    <div class="component-desc">Statistiken &amp; Tracking</div>
                </div>
                <div class="component-item" draggable="true" data-type="multilang">
                    <div class="component-icon">üåê</div>
                    <div class="component-name">Mehrsprachigkeit</div>
                    <div class="component-desc">Sprachversionen</div>
                </div>
                <div class="component-item" draggable="true" data-type="workflow">
                    <div class="component-icon">‚öôÔ∏è</div>
                    <div class="component-name">Workflow</div>
                    <div class="component-desc">Genehmigungsprozesse</div>
                </div>
            </div>

            <!-- Templates Tab -->
            <div id="templates-tab" class="tab-content">
                <h3 style="color: #4f46e5; margin-bottom: 20px;">üìã MODX Templates</h3>
                
                <div class="template-item" onclick="loadTemplate('business')">
                    <div class="template-icon">üè¢</div>
                    <div class="template-name">Business Template</div>
                    <div class="template-desc">Professionelle Unternehmensseite</div>
                </div>
                
                <div class="template-item" onclick="loadTemplate('portfolio')">
                    <div class="template-icon">üé®</div>
                    <div class="template-name">Portfolio Template</div>
                    <div class="template-desc">Kreative Portfolioseite</div>
                </div>
                
                <div class="template-item" onclick="loadTemplate('blog')">
                    <div class="template-icon">üìù</div>
                    <div class="template-name">Blog Template</div>
                    <div class="template-desc">Blog &amp; Artikel Layout</div>
                </div>
                
                <div class="template-item" onclick="loadTemplate('ecommerce')">
                    <div class="template-icon">üõí</div>
                    <div class="template-name">E-Commerce Template</div>
                    <div class="template-desc">Online-Shop Layout</div>
                </div>
                
                <div class="template-item" onclick="loadTemplate('landing')">
                    <div class="template-icon">üöÄ</div>
                    <div class="template-name">Landing Page</div>
                    <div class="template-desc">Konversionsoptimierte Seite</div>
                </div>
                
                <div class="template-item" onclick="loadTemplate('corporate')">
                    <div class="template-icon">üè¢</div>
                    <div class="template-name">Corporate Template</div>
                    <div class="template-desc">Professionelle Unternehmensseite</div>
                </div>
                
                <div class="template-item" onclick="loadTemplate('restaurant')">
                    <div class="template-icon">üçΩÔ∏è</div>
                    <div class="template-name">Restaurant Template</div>
                    <div class="template-desc">Gastronomie & Speisekarte</div>
                </div>
            </div>

            <!-- Einstellungen Tab -->
            <div id="settings-tab" class="tab-content">
                <h3 style="color: #4f46e5; margin-bottom: 20px;">‚öôÔ∏è MODX System Settings</h3>
                
                <div class="setting-group">
                    <h4 style="color: #4f46e5; margin-bottom: 15px;">üåê Website-Einstellungen</h4>
                    <div class="setting-item">
                        <label>Website-Name:</label>
                        <input type="text" id="siteName" placeholder="Meine Website" value="MODX CMS Builder">
                    </div>
                    <div class="setting-item">
                        <label>Standard-Sprache:</label>
                        <select id="defaultLang">
                            <option value="de">Deutsch</option>
                            <option value="en">English</option>
                            <option value="nl">Nederlands</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label>Zeitzone:</label>
                        <select id="timezone">
                            <option value="Europe/Berlin">Berlin (UTC+1)</option>
                            <option value="Europe/London">London (UTC+0)</option>
                            <option value="America/New_York">New York (UTC-5)</option>
                        </select>
                    </div>
                </div>
                
                <div class="setting-group">
                    <h4 style="color: #4f46e5; margin-bottom: 15px;">üîí Sicherheit</h4>
                    <div class="setting-item">
                        <label>Session-Timeout (Minuten):</label>
                        <input type="number" id="sessionTimeout" value="30" min="5" max="480">
                    </div>
                    <div class="setting-item">
                        <label>Max. Login-Versuche:</label>
                        <input type="number" id="maxLoginAttempts" value="5" min="3" max="10">
                    </div>
                </div>
                
                <div class="setting-group">
                    <h4 style="color: #4f46e5; margin-bottom: 15px;">üìß E-Mail-Einstellungen</h4>
                    <div class="setting-item">
                        <label>SMTP-Server:</label>
                        <input type="text" id="smtpServer" placeholder="smtp.example.com">
                    </div>
                    <div class="setting-item">
                        <label>E-Mail-Adresse:</label>
                        <input type="email" id="adminEmail" placeholder="admin@example.com">
                    </div>
                    <div class="setting-item">
                        <label>E-Mail-Template:</label>
                        <select id="emailTemplate">
                            <option value="default">Standard Template</option>
                            <option value="newsletter">Newsletter Template</option>
                            <option value="notification">Benachrichtigung Template</option>
                        </select>
                    </div>
                </div>
                
                <div class="setting-group">
                    <h4 style="color: #4f46e5; margin-bottom: 15px;">üîç SEO & Analytics</h4>
                    <div class="setting-item">
                        <label>Google Analytics ID:</label>
                        <input type="text" id="googleAnalytics" placeholder="GA-XXXXXXXXX">
                    </div>
                    <div class="setting-item">
                        <label>Google Search Console:</label>
                        <input type="text" id="searchConsole" placeholder="Verifizierungscode">
                    </div>
                    <div class="setting-item">
                        <label>Meta-Keywords (Standard):</label>
                        <input type="text" id="defaultKeywords" placeholder="Website, CMS, MODX">
                    </div>
                </div>
                
                <div class="setting-group">
                    <h4 style="color: #4f46e5; margin-bottom: 15px;">üåê Erweiterte Einstellungen</h4>
                    <div class="setting-item">
                        <label>Cache aktivieren:</label>
                        <select id="enableCache">
                            <option value="true">Ja</option>
                            <option value="false">Nein</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label>Debug-Modus:</label>
                        <select id="debugMode">
                            <option value="false">Deaktiviert</option>
                            <option value="true">Aktiviert</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label>Backup-Frequenz:</label>
                        <select id="backupFrequency">
                            <option value="daily">T√§glich</option>
                            <option value="weekly">W√∂chentlich</option>
                            <option value="monthly">Monatlich</option>
                        </select>
                    </div>
                </div>
                
                <button onclick="saveSettings()" style="background: linear-gradient(135deg, #10b981, #059669); margin-top: 20px; width: 100%;">üíæ Einstellungen speichern</button>
            </div>
        </div>

        <div class="main-content">
            <div class="toolbar">
                <!-- Grundlegende Werkzeuge -->
                <div class="toolbar-section">
                    <button onclick="undoAction()">‚Ü∂ R√ºckg√§ngig</button>
                    <button onclick="redoAction()">‚Ü∑ Wiederholen</button>
                    <button onclick="previewPage()">üëÅÔ∏è Vorschau</button>
                    <button onclick="loadProject()">üìÇ Laden</button>
                    <button onclick="exportProject()">üì§ Exportieren</button>
                </div>
                
                <!-- Erweiterte CMS-Werkzeuge -->
                <div class="toolbar-section">
                    <button onclick="toggleEditMode()">‚úèÔ∏è Bearbeitungsmodus</button>
                    <button onclick="toggleFullCanvas()">üîç Vollansicht</button>
                    <button onclick="clearCanvas()">üóëÔ∏è L√∂schen</button>
                    <button onclick="showPageStructure()">üìÑ Seitenstruktur</button>
                    <button onclick="showMediaLibrary()">üñºÔ∏è Medienverwaltung</button>
                </div>
                
                <!-- Design & Layout Werkzeuge -->
                <div class="toolbar-section">
                    <button onclick="showDesignPanel()">üé® Design</button>
                    <button onclick="showLayoutGrid()">üìê Layout</button>
                    <button onclick="showResponsivePreview()">üì± Responsive</button>
                    <button onclick="showSEOEditor()">üîç SEO</button>
                </div>
                
                <!-- Erweiterte Funktionen -->
                <div class="toolbar-section">
                    <button onclick="showUserManagement()">üë• Benutzer</button>
                    <button onclick="showPluginManager()">üîå Plugins</button>
                    <button onclick="showVersionControl()">üìö Versionierung</button>
                    <button onclick="showAnalytics()">üìä Analytics</button>
                </div>
                
                <!-- CMS Core Features -->
                <div class="toolbar-section">
                    <button onclick="showContentTypes()">üèóÔ∏è Content Types</button>
                    <button onclick="showWorkflow()">‚ö° Workflow</button>
                    <button onclick="showLanguages()">üåç Sprachen</button>
                    <button onclick="showNavigation()">üß≠ Navigation</button>
                    <button onclick="showSearch()">üîç Suche</button>
                    <button onclick="showPerformance()">‚ö° Performance</button>
                </div>
                
                <!-- Speichern & Status (nur bei √Ñnderungen sichtbar) -->
                <div class="toolbar-section" id="saveStatusSection" style="display: none;">
                    <button onclick="saveProject()" class="save-btn" style="background: linear-gradient(135deg, #10b981, #059669);">üíæ Speichern</button>
                    <span id="autoSaveStatus" style="color: #10b981; font-size: 12px; margin-left: 10px;">‚úì Auto-Save aktiv</span>
                </div>
            </div>

            <div class="canvas-container">
                <div id="canvas">
                    <div class="canvas-placeholder">
                        üéØ <strong>Canvas ist aktiv!</strong><br>
                        <small>Ziehen Sie Komponenten hierher oder nutzen Sie das Schnell-Men√º links</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Image Upload Modal -->
    <div id="imageModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üñºÔ∏è Bild hochladen</h3>
                <button class="modal-close" onclick="closeImageModal()">&times;</button>
            </div>
            <div class="form-group">
                <label>Bild ausw√§hlen:</label>
                <input type="file" id="imageFile" accept="image/*" onchange="previewImage(this)">
            </div>
            <div class="form-group">
                <label>Alternativtext (SEO):</label>
                <input type="text" id="imageAlt" placeholder="Beschreibung des Bildes">
            </div>
            <div class="form-group">
                <label>Bildgr√∂√üe:</label>
                <select id="imageSize">
                    <option value="small">Klein (300x200)</option>
                    <option value="medium" selected>Mittel (600x400)</option>
                    <option value="large">Gro√ü (900x600)</option>
                    <option value="custom">Benutzerdefiniert</option>
                </select>
            </div>
            <div id="imagePreviewContainer" style="display: none;">
                <label>Vorschau:</label>
                <img id="imagePreview" class="image-preview" alt="Vorschau">
            </div>
            <div class="btn-group">
                <button class="btn btn-secondary" onclick="closeImageModal()">Abbrechen</button>
                <button class="btn btn-success" onclick="uploadImage()">Bild einf√ºgen</button>
            </div>
        </div>
    </div>

    <!-- Component Edit Modal -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>‚úèÔ∏è Komponente bearbeiten</h3>
                <button class="modal-close" onclick="closeEditModal()">&times;</button>
            </div>
            <div id="editModalContent">
                <!-- Content will be dynamically loaded -->
            </div>
            <div class="btn-group">
                <button class="btn btn-secondary" onclick="closeEditModal()">Abbrechen</button>
                <button class="btn btn-success" onclick="saveComponentEdit()">Speichern</button>
            </div>
        </div>
    </div>

    <script>
        // Globale Variablen
        let selectedComponent = null;
        let editMode = false;
        let undoStack = [];
        let redoStack = [];
        let currentEditingComponent = null;
        let autoSaveTimer = null;
        let hasUnsavedChanges = false;
        let lastSavedState = '';

        // Tab-Funktionalit√§t
        function showTab(tabName) {
            // Alle Tabs verstecken
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });

            // Gew√§hlten Tab anzeigen
            document.getElementById(tabName + '-tab').classList.add('active');
            event.target.classList.add('active');
        }

        // Drag & Drop Funktionalit√§t
        function initializeDragAndDrop() {
            const canvas = document.getElementById('canvas');
            const componentItems = document.querySelectorAll('.component-item');

            // Drag & Drop f√ºr Komponenten
            componentItems.forEach(item => {
                item.addEventListener('dragstart', function(e) {
                    try {
                        const componentType = this.getAttribute('data-type');
                        e.dataTransfer.setData('text/plain', componentType);
                        e.dataTransfer.effectAllowed = 'copy';
                        this.style.opacity = '0.5';
                        
                        // Drag-Vorschau verbessern
                        const dragPreview = this.cloneNode(true);
                        dragPreview.style.opacity = '0.8';
                        dragPreview.style.transform = 'rotate(5deg)';
                        document.body.appendChild(dragPreview);
                        e.dataTransfer.setDragImage(dragPreview, 0, 0);
                        
                        setTimeout(() => document.body.removeChild(dragPreview), 0);
                    } catch (error) {
                        console.error('Fehler beim Drag Start:', error);
                    }
                });

                item.addEventListener('dragend', function() {
                    this.style.opacity = '1';
                });
            });

            // Canvas-Drop-Funktionalit√§t
            canvas.addEventListener('dragover', function(e) {
                e.preventDefault();
                this.classList.add('drag-over');
                
                // Drop-Zone-Indikator anzeigen
                showDropZoneIndicator(e);
            });

            canvas.addEventListener('dragleave', function(e) {
                this.classList.remove('drag-over');
                hideDropZoneIndicator();
            });

            canvas.addEventListener('drop', function(e) {
                e.preventDefault();
                this.classList.remove('drag-over');
                hideDropZoneIndicator();

                try {
                    const componentType = e.dataTransfer.getData('text/plain');
                    if (componentType) {
                        const rect = this.getBoundingClientRect();
                        const x = e.clientX - rect.left;
                        const y = e.clientY - rect.top;

                        // Intelligente Positionierung
                        const adjustedPosition = calculateOptimalPosition(x, y, componentType);
                        addComponent(componentType, adjustedPosition.x, adjustedPosition.y);
                        
                        // Erfolgs-Animation
                        showDropSuccessAnimation(adjustedPosition.x, adjustedPosition.y);
                    }
                } catch (error) {
                    console.error('Fehler beim Drop:', error);
                    alert('‚ùå Fehler beim Hinzuf√ºgen der Komponente');
                }
            });

            // Drag & Drop f√ºr Dateien
            canvas.addEventListener('dragover', function(e) {
                if (e.dataTransfer.types.includes('Files')) {
                    e.preventDefault();
                    this.classList.add('file-drop-over');
                }
            });

            canvas.addEventListener('drop', function(e) {
                if (e.dataTransfer.files.length > 0) {
                    e.preventDefault();
                    this.classList.remove('file-drop-over');
                    
                    const files = Array.from(e.dataTransfer.files);
                    handleFileDrop(files, e.clientX, e.clientY);
                }
            });
        }
        
        // Drop-Zone-Indikator
        function showDropZoneIndicator(e) {
            let indicator = document.getElementById('dropZoneIndicator');
            if (!indicator) {
                indicator = document.createElement('div');
                indicator.id = 'dropZoneIndicator';
                indicator.style.cssText = `
                    position: absolute;
                    border: 3px dashed #4f46e5;
                    background: rgba(79, 70, 229, 0.1);
                    border-radius: 8px;
                    pointer-events: none;
                    z-index: 1000;
                    transition: all 0.3s ease;
                `;
                document.body.appendChild(indicator);
            }
            
            const canvas = document.getElementById('canvas');
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            indicator.style.left = (rect.left + x - 50) + 'px';
            indicator.style.top = (rect.top + y - 25) + 'px';
            indicator.style.width = '100px';
            indicator.style.height = '50px';
            indicator.style.display = 'block';
        }
        
        function hideDropZoneIndicator() {
            const indicator = document.getElementById('dropZoneIndicator');
            if (indicator) {
                indicator.style.display = 'none';
            }
        }
        
        // Intelligente Positionierung
        function calculateOptimalPosition(x, y, componentType) {
            const canvas = document.getElementById('canvas');
            const components = canvas.querySelectorAll('.canvas-component');
            
            // Standard-Position
            let optimalX = x;
            let optimalY = y;
            
            // Kollisionserkennung
            components.forEach(component => {
                const rect = component.getBoundingClientRect();
                const canvasRect = canvas.getBoundingClientRect();
                const compX = rect.left - canvasRect.left;
                const compY = rect.top - canvasRect.top;
                
                // Wenn Komponenten sich √ºberlappen, verschieben
                if (Math.abs(x - compX) < 150 && Math.abs(y - compY) < 100) {
                    optimalX = compX + 200;
                    optimalY = compY + 150;
                }
            });
            
            // Canvas-Grenzen respektieren
            optimalX = Math.max(20, Math.min(optimalX, canvas.offsetWidth - 120));
            optimalY = Math.max(20, Math.min(optimalY, canvas.offsetHeight - 80));
            
            return { x: optimalX, y: optimalY };
        }
        
        // Erfolgs-Animation
        function showDropSuccessAnimation(x, y) {
            const canvas = document.getElementById('canvas');
            const rect = canvas.getBoundingClientRect();
            
            const successIndicator = document.createElement('div');
            successIndicator.style.cssText = `
                position: absolute;
                left: ${rect.left + x}px;
                top: ${rect.top + y}px;
                background: #10b981;
                color: white;
                padding: 8px 16px;
                border-radius: 20px;
                font-size: 14px;
                font-weight: 500;
                z-index: 10000;
                animation: dropSuccess 1s ease-out forwards;
            `;
            successIndicator.textContent = '‚úÖ Komponente hinzugef√ºgt';
            
            // CSS-Animation hinzuf√ºgen
            if (!document.getElementById('dropSuccessAnimation')) {
                const style = document.createElement('style');
                style.id = 'dropSuccessAnimation';
                style.textContent = `
                    @keyframes dropSuccess {
                        0% { opacity: 0; transform: scale(0.5) translateY(20px); }
                        50% { opacity: 1; transform: scale(1.1) translateY(-10px); }
                        100% { opacity: 0; transform: scale(1) translateY(-30px); }
                    }
                `;
                document.head.appendChild(style);
            }
            
            document.body.appendChild(successIndicator);
            
            setTimeout(() => {
                if (successIndicator.parentNode) {
                    successIndicator.parentNode.removeChild(successIndicator);
                }
            }, 1000);
        }
        
        // Datei-Drop behandeln
        function handleFileDrop(files, clientX, clientY) {
            const canvas = document.getElementById('canvas');
            const rect = canvas.getBoundingClientRect();
            const x = clientX - rect.left;
            const y = clientY - rect.top;
            
            files.forEach(file => {
                if (file.type.startsWith('image/')) {
                    // Bild-Komponente erstellen
                    addComponent('image', x, y);
                    
                    // Bild in die neue Komponente einf√ºgen
                    setTimeout(() => {
                        const newComponent = canvas.querySelector('.canvas-component:last-child');
                        if (newComponent) {
                            const reader = new FileReader();
                            reader.onload = function(e) {
                                const content = newComponent.querySelector('.component-content');
                                if (content) {
                                    const img = document.createElement('img');
                                    img.src = e.target.result;
                                    img.alt = file.name;
                                    img.style.maxWidth = '100%';
                                    img.style.height = 'auto';
                                    img.style.borderRadius = '8px';
                                    img.style.boxShadow = '0 2px 10px rgba(0,0,0,0.1)';
                                    
                                    content.innerHTML = '';
                                    content.appendChild(img);
                                    
                                    // Canvas-H√∂he anpassen (mit Verz√∂gerung f√ºr bessere Berechnung)
                                    setTimeout(updateCanvasSize, 50);
                                    
                                    saveState();
                                }
                            };
                            reader.readAsDataURL(file);
                        }
                    }, 100);
                } else {
                    // Datei-Link-Komponente erstellen
                    addComponent('container', x, y);
                    
                    setTimeout(() => {
                        const newComponent = canvas.querySelector('.canvas-component:last-child');
                        if (newComponent) {
                            const content = newComponent.querySelector('.component-content');
                            if (content) {
                                const link = document.createElement('a');
                                link.href = URL.createObjectURL(file);
                                link.download = file.name;
                                link.textContent = `üìé ${file.name} herunterladen`;
                                link.style.cssText = 'display: block; padding: 15px; background: #f8f9fa; border: 1px solid #ddd; border-radius: 6px; text-decoration: none; color: #333; text-align: center;';
                                                                    content.innerHTML = '';
                                    content.appendChild(link);
                                    
                                    // Canvas-H√∂he anpassen (mit Verz√∂gerung f√ºr bessere Berechnung)
                                    setTimeout(updateCanvasSize, 50);
                                    
                                    saveState();
                            }
                        }
                    }, 100);
                }
            });
        }

        // Komponente hinzuf√ºgen
        function addComponent(type, x, y) {
            const canvas = document.getElementById('canvas');
            const placeholder = canvas.querySelector('.canvas-placeholder');
            if (placeholder) {
                placeholder.remove();
            }

            const component = createComponent(type);
            component.style.position = 'absolute';
            component.style.left = x + 'px';
            component.style.top = y + 'px';

            canvas.appendChild(component);
            makeComponentInteractive(component);
            
            // Alle Komponenten neu interaktiv machen
            makeAllComponentsInteractive();
            
            // Canvas-H√∂he anpassen (mit Verz√∂gerung f√ºr bessere Berechnung)
            setTimeout(updateCanvasSize, 50);
            
            saveState();
        }

        // Komponente erstellen
        function createComponent(type) {
            const component = document.createElement('div');
            component.className = 'canvas-component';
            component.id = 'component-' + Date.now();

            const componentData = {
                heading: {
                    title: '√úberschrift',
                    content: '<h1 contenteditable="true">√úberschrift hier bearbeiten</h1>'
                },
                paragraph: {
                    title: 'Absatz',
                    content: '<p contenteditable="true">Absatz Text hier bearbeiten. Klicken Sie um den Inhalt zu √§ndern.</p>'
                },
                button: {
                    title: 'Button',
                    content: '<button contenteditable="true" style="background: #4f46e5; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer;">Button Text</button>'
                },
                image: {
                    title: 'Bild',
                    content: '<div class="image-upload-area" onclick="openImageModal()"><div>üñºÔ∏è Klicken Sie hier um ein Bild hochzuladen</div><div style="font-size: 12px; margin-top: 5px; color: #666;">Drag & Drop oder Klick</div></div>'
                },
                container: {
                    title: 'Container',
                    content: '<div contenteditable="true" style="min-height: 100px; border: 2px dashed #ddd; padding: 20px; text-align: center;">Container Inhalt hier bearbeiten</div>'
                },
                form: {
                    title: 'Formular',
                    content: '<form style="background: #f8f9fa; padding: 20px; border-radius: 8px;"><h3 style="margin-bottom: 15px;">Kontaktformular</h3><div style="margin-bottom: 15px;"><input type="text" placeholder="Name" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;"></div><div style="margin-bottom: 15px;"><input type="email" placeholder="Email" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;"></div><div style="margin-bottom: 15px;"><textarea placeholder="Nachricht" rows="4" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;"></textarea></div><button type="submit" style="background: #28a745; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer;">Senden</button></form>'
                },
                card: {
                    title: 'Karte',
                    content: '<div style="border: 1px solid #ddd; border-radius: 8px; padding: 20px; text-align: center; background: white;"><h3 contenteditable="true">Karten Titel</h3><p contenteditable="true">Karten Beschreibung hier...</p><button style="background: #4f46e5; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; margin-top: 10px;">Mehr erfahren</button></div>'
                },
                gallery: {
                    title: 'Galerie',
                    content: '<div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;"><div style="background: #f0f0f0; padding: 20px; text-align: center; border-radius: 8px; cursor: pointer;" onclick="openImageModal()">üñºÔ∏è Bild 1</div><div style="background: #f0f0f0; padding: 20px; text-align: center; border-radius: 8px; cursor: pointer;" onclick="openImageModal()">üñºÔ∏è Bild 2</div><div style="background: #f0f0f0; padding: 20px; text-align: center; border-radius: 8px; cursor: pointer;" onclick="openImageModal()">üñºÔ∏è Bild 3</div></div>'
                },
                formit: {
                    title: 'FormIt',
                    content: '<form style="background: #f8f9fa; padding: 20px; border-radius: 8px;"><h3 style="margin-bottom: 15px;">Kontaktformular</h3><div style="margin-bottom: 15px;"><input type="text" placeholder="Name" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;"></div><div style="margin-bottom: 15px;"><input type="email" placeholder="E-Mail" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;"></div><div style="margin-bottom: 15px;"><textarea placeholder="Nachricht" rows="4" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;"></textarea></div><button type="submit" style="background: #007bff; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer;">Senden</button></form>'
                },
                seo: {
                    title: 'SEO Pro',
                    content: '<div style="background: #e3f2fd; padding: 20px; border-radius: 8px; border-left: 4px solid #2196f3;"><h3 style="margin-bottom: 10px;">SEO-Einstellungen</h3><div style="margin-bottom: 10px;"><label>Meta-Titel:</label><input type="text" placeholder="Seitentitel f√ºr Suchmaschinen" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;"></div><div style="margin-bottom: 10px;"><label>Meta-Beschreibung:</label><textarea placeholder="Kurze Beschreibung der Seite" rows="3" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;"></textarea></div><div style="margin-bottom: 10px;"><label>Keywords:</label><input type="text" placeholder="Schl√ºsselw√∂rter, getrennt durch Kommas" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;"></div></div>'
                },
                blog: {
                    title: 'Blog',
                    content: '<article style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);"><header style="margin-bottom: 15px;"><h2 contenteditable="true" style="color: #333; margin-bottom: 5px;">Blog-Artikel Titel</h2><time style="color: #666; font-size: 14px;">Datum hier</time></header><div contenteditable="true" style="line-height: 1.6; color: #555;">Blog-Artikel Inhalt hier. Klicken Sie um den Text zu bearbeiten...</div><footer style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #eee;"><span style="color: #666; font-size: 14px;">Tags: </span><span style="background: #f0f0f0; padding: 2px 8px; border-radius: 12px; font-size: 12px; margin-right: 5px;">Tag 1</span><span style="background: #f0f0f0; padding: 2px 8px; border-radius: 12px; font-size: 12px;">Tag 2</span></footer></article>'
                },
                calendar: {
                    title: 'Calendar',
                    content: '<div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);"><h3 style="margin-bottom: 15px; text-align: center;">Termine & Events</h3><div style="display: grid; gap: 10px;"><div style="background: #f8f9fa; padding: 15px; border-radius: 6px; border-left: 4px solid #28a745;"><h4 style="margin: 0 0 5px 0;">Event 1</h4><p style="margin: 0; color: #666;">Datum: 15. Januar 2025</p><p style="margin: 5px 0 0 0; color: #666;">Uhrzeit: 14:00 Uhr</p></div><div style="background: #f8f9fa; padding: 15px; border-radius: 6px; border-left: 4px solid #007bff;"><h4 style="margin: 0 0 5px 0;">Event 2</h4><p style="margin: 0; color: #666;">Datum: 20. Januar 2025</p><p style="margin: 5px 0 0 0; color: #666;">Uhrzeit: 19:00 Uhr</p></div></div></div>'
                },
                search: {
                    title: 'Search',
                    content: '<div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);"><h3 style="margin-bottom: 15px;">Suche & Filter</h3><div style="margin-bottom: 15px;"><input type="text" placeholder="Suchen Sie nach..." style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 6px; font-size: 16px;"></div><div style="display: flex; gap: 10px; flex-wrap: wrap;"><button style="background: #f8f9fa; border: 1px solid #ddd; padding: 8px 16px; border-radius: 20px; cursor: pointer;">Alle</button><button style="background: #f8f9fa; border: 1px solid #ddd; padding: 8px 16px; border-radius: 20px; cursor: pointer;">Artikel</button><button style="background: #f8f9fa; border: 1px solid #ddd; padding: 8px 16px; border-radius: 20px; cursor: pointer;">Bilder</button><button style="background: #f8f9fa; border: 1px solid #ddd; padding: 8px 16px; border-radius: 20px; cursor: pointer;">Videos</button></div></div>'
                },
                social: {
                    title: 'Social Media',
                    content: '<div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);"><h3 style="margin-bottom: 15px; text-align: center;">Social Media</h3><div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;"><button style="background: #1877f2; color: white; border: none; padding: 12px 20px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; gap: 8px;">üìò Facebook</button><button style="background: #1da1f2; color: white; border: none; padding: 12px 20px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; gap: 8px;">üê¶ Twitter</button><button style="background: #e4405f; color: white; border: none; padding: 12px 20px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; gap: 8px;">üì∑ Instagram</button><button style="background: #0077b5; color: white; border: none; padding: 12px 20px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; gap: 8px;">üíº LinkedIn</button></div></div>'
                },
                map: {
                    title: 'Google Maps',
                    content: '<div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);"><h3 style="margin-bottom: 15px; text-align: center;">Google Maps</h3><div style="background: #f0f0f0; height: 200px; border-radius: 6px; display: flex; align-items: center; justify-content: center; border: 2px dashed #ccc;"><div style="text-align: center; color: #666;"><div style="font-size: 48px; margin-bottom: 10px;">üó∫Ô∏è</div><p>Google Maps wird hier eingebettet</p><p style="font-size: 12px; margin-top: 5px;">Koordinaten: 51.5074¬∞ N, 0.1278¬∞ W</p></div></div></div>'
                },
                video: {
                    title: 'Video Player',
                    content: '<div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);"><h3 style="margin-bottom: 15px; text-align: center;">Video Player</h3><div style="background: #000; height: 200px; border-radius: 6px; display: flex; align-items: center; justify-content: center; position: relative;"><div style="text-align: center; color: white;"><div style="font-size: 48px; margin-bottom: 10px;">üé•</div><p>Video wird hier eingebettet</p><p style="font-size: 12px; margin-top: 5px;">YouTube, Vimeo oder lokale Dateien</p></div><button style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(255,255,255,0.2); border: none; color: white; width: 60px; height: 60px; border-radius: 50%; font-size: 24px; cursor: pointer;">‚ñ∂Ô∏è</button></div></div>'
                },
                slider: {
                    title: 'Slider',
                    content: '<div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);"><h3 style="margin-bottom: 15px; text-align: center;">Bildkarussell</h3><div style="position: relative; height: 200px; background: linear-gradient(45deg, #f0f0f0, #e0e0e0); border-radius: 6px; overflow: hidden;"><div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; color: #666;"><div style="text-align: center;"><div style="font-size: 48px; margin-bottom: 10px;">üñºÔ∏è</div><p>Bild 1 von 3</p></div></div><button style="position: absolute; left: 10px; top: 50%; transform: translateY(-50%); background: rgba(0,0,0,0.5); color: white; border: none; width: 40px; height: 40px; border-radius: 50%; cursor: pointer;">‚Äπ</button><button style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); background: rgba(0,0,0,0.5); color: white; border: none; width: 40px; height: 40px; border-radius: 50%; cursor: pointer;">‚Ä∫</button></div><div style="display: flex; justify-content: center; gap: 10px; margin-top: 15px;"><span style="width: 12px; height: 12px; background: #007bff; border-radius: 50%;"></span><span style="width: 12px; height: 12px; background: #ddd; border-radius: 50%;"></span><span style="width: 12px; height: 12px; background: #ddd; border-radius: 50%;"></span></div></div>'
                },
                ecommerce: {
                    title: 'E-Commerce',
                    content: '<div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);"><h3 style="margin-bottom: 15px; text-align: center;">E-Commerce</h3><div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;"><div style="background: #f8f9fa; padding: 20px; border-radius: 6px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);"><h4 style="margin-bottom: 10px;">Produktkatalog</h4><p style="margin: 0; color: #666;">Einfache Produktverwaltung und Katalog</p></div><div style="background: #f8f9fa; padding: 20px; border-radius: 6px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);"><h4 style="margin-bottom: 10px;">Online Shop</h4><p style="margin: 0; color: #666;">Ein vollst√§ndiger Online-Shop mit Produktkatalog und Checkout-Funktion</p></div></div></div>'
                },
                newsletter: {
                    title: 'Newsletter',
                    content: '<div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);"><h3 style="margin-bottom: 15px; text-align: center;">Newsletter</h3><div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;"><div style="background: #f8f9fa; padding: 20px; border-radius: 6px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);"><h4 style="margin-bottom: 10px;">E-Mail Marketing</h4><p style="margin: 0; color: #666;">Einfache M√∂glichkeit, E-Mails an Kunden zu verschicken</p></div><div style="background: #f8f9fa; padding: 20px; border-radius: 6px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);"><h4 style="margin-bottom: 10px;">Newsletter-Abonnement</h4><p style="margin: 0; color: #666;">Einfache M√∂glichkeit, Kunden auf Ihre Newsletter zu verweisen</p></div></div></div>'
                },
                chat: {
                    title: 'Live Chat',
                    content: '<div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);"><h3 style="margin-bottom: 15px; text-align: center;">Live Chat</h3><div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;"><div style="background: #f8f9fa; padding: 20px; border-radius: 6px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);"><h4 style="margin-bottom: 10px;">Kundensupport</h4><p style="margin: 0; color: #666;">Einfache M√∂glichkeit, Kunden zu unterst√ºtzen</p></div><div style="background: #f8f9fa; padding: 20px; border-radius: 6px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);"><h4 style="margin-bottom: 10px;">Kundeninteraktion</h4><p style="margin: 0; color: #666;">Einfache M√∂glichkeit, Kundeninteraktion zu erm√∂glichen</p></div></div></div>'
                },
                analytics: {
                    title: 'Analytics',
                    content: '<div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);"><h3 style="margin-bottom: 15px; text-align: center;">Analytics</h3><div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;"><div style="background: #f8f9fa; padding: 20px; border-radius: 6px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);"><h4 style="margin-bottom: 10px;">Statistiken</h4><p style="margin: 0; color: #666;">Einfache M√∂glichkeit, Statistiken zu analysieren</p></div><div style="background: #f8f9fa; padding: 20px; border-radius: 6px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);"><h4 style="margin-bottom: 10px;">Tracking</h4><p style="margin: 0; color: #666;">Einfache M√∂glichkeit, Besucher zu verfolgen</p></div></div></div>'
                },
                multilang: {
                    title: 'Mehrsprachigkeit',
                    content: '<div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);"><h3 style="margin-bottom: 15px; text-align: center;">Mehrsprachigkeit</h3><div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;"><div style="background: #f8f9fa; padding: 20px; border-radius: 6px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);"><h4 style="margin-bottom: 10px;">Sprachversionen</h4><p style="margin: 0; color: #666;">Einfache M√∂glichkeit, verschiedene Sprachen zu unterst√ºtzen</p></div><div style="background: #f8f9fa; padding: 20px; border-radius: 6px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);"><h4 style="margin-bottom: 10px;">√úbersetzung</h4><p style="margin: 0; color: #666;">Einfache M√∂glichkeit, Inhalte in verschiedene Sprachen zu √ºbersetzen</p></div></div></div>'
                },
                workflow: {
                    title: 'Workflow',
                    content: '<div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);"><h3 style="margin-bottom: 15px; text-align: center;">Workflow</h3><div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;"><div style="background: #f8f9fa; padding: 20px; border-radius: 6px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);"><h4 style="margin-bottom: 10px;">Genehmigungsprozesse</h4><p style="margin: 0; color: #666;">Einfache M√∂glichkeit, Genehmigungsprozesse zu automatisieren</p></div><div style="background: #f8f9fa; padding: 20px; border-radius: 6px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);"><h4 style="margin-bottom: 10px;">Workflow-Management</h4><p style="margin: 0; color: #666;">Einfache M√∂glichkeit, Workflow-Management zu automatisieren</p></div></div></div>'
                }
            };

            const data = componentData[type] || componentData['heading'];

            // Komponente mit eindeutigen IDs f√ºr die Buttons erstellen
            const uniqueId = Date.now();
            component.innerHTML = `
                <div class="component-header">
                    <span>${data.title}</span>
                    <div class="component-actions">
                        <button class="component-action" data-action="edit" data-component-id="${uniqueId}" title="Bearbeiten">‚úèÔ∏è</button>
                        <button class="component-action" data-action="duplicate" data-component-id="${uniqueId}" title="Duplizieren">üìã</button>
                        <button class="component-action" data-action="delete" data-component-id="${uniqueId}" title="L√∂schen">üóëÔ∏è</button>
                        <button class="component-action" data-action="link" data-component-id="${uniqueId}" title="Datei verkn√ºpfen">üìé</button>
                    </div>
                </div>
                <div class="component-content">
                    ${data.content}
                </div>
            `;

            return component;
        }

        // Komponente interaktiv machen
        function makeComponentInteractive(component) {
            const header = component.querySelector('.component-header');
            const actions = component.querySelector('.component-actions');

            // Event-Listener f√ºr Komponenten-Aktionen mit Event-Delegation
            if (actions) {
                // Event-Listener f√ºr alle Aktionen hinzuf√ºgen
                actions.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    const button = e.target.closest('.component-action');
                    if (!button) return;
                    
                    const action = button.getAttribute('data-action');
                    
                    switch(action) {
                        case 'edit':
                            editComponent(component.id);
                            break;
                        case 'duplicate':
                            duplicateComponent(component.id);
                            break;
                        case 'delete':
                            deleteComponent(component.id);
                            break;
                        case 'link':
                            linkComponentToFile(component.id);
                            break;
                    }
                });
            }

            // Verbesserte Drag & Drop Funktionalit√§t
            if (header) {
                header.addEventListener('mousedown', function(e) {
                    if (e.target.closest('.component-actions')) {
                        return;
                    }
                    e.preventDefault();
                    e.stopPropagation();

                    component.classList.add('dragging');
                    component.style.zIndex = '9999';

                    const rect = component.getBoundingClientRect();
                    const offsetX = e.clientX - rect.left;
                    const offsetY = e.clientY - rect.top;

                    const handleMouseMove = function(e) {
                        const canvas = document.getElementById('canvas');
                        const canvasRect = canvas.getBoundingClientRect();
                        const newX = e.clientX - canvasRect.left - offsetX;
                        const newY = e.clientY - canvasRect.top - offsetY;

                        // Begrenzung innerhalb des Canvas
                        const maxX = canvasRect.width - component.offsetWidth;
                        const maxY = canvasRect.height - component.offsetHeight;
                        
                        component.style.left = Math.max(0, Math.min(newX, maxX)) + 'px';
                        component.style.top = Math.max(0, Math.min(newY, maxY)) + 'px';
                    };

                    const handleMouseUp = function() {
                        component.classList.remove('dragging');
                        component.style.zIndex = 'auto';
                        document.removeEventListener('mousemove', handleMouseMove);
                        document.removeEventListener('mouseup', handleMouseUp);
                        
                        // Canvas-H√∂he anpassen (mit Verz√∂gerung f√ºr bessere Berechnung)
                        setTimeout(updateCanvasSize, 50);
                        
                        saveState();
                    };

                    document.addEventListener('mousemove', handleMouseMove);
                    document.addEventListener('mouseup', handleMouseUp);
                });
            }

            // Komponente ausw√§hlbar machen
            component.addEventListener('click', function(e) {
                if (e.target.closest('.component-actions')) {
                    return;
                }
                selectComponent(component);
            });

            // Resize-Funktionalit√§t hinzuf√ºgen
            component.addEventListener('mousedown', function(e) {
                if (e.target === component || e.target.closest('.component-content')) {
                    const rect = component.getBoundingClientRect();
                    const isResizing = e.clientX > rect.right - 20 && e.clientY > rect.bottom - 20;
                    
                    if (isResizing) {
                        e.preventDefault();
                        e.stopPropagation();
                        
                        const startWidth = component.offsetWidth;
                        const startHeight = component.offsetHeight;
                        const startX = e.clientX;
                        const startY = e.clientY;
                        
                        const handleResize = function(e) {
                            const newWidth = startWidth + (e.clientX - startX);
                            const newHeight = startHeight + (e.clientY - startY);
                            
                            if (newWidth > 100 && newHeight > 50) {
                                component.style.width = newWidth + 'px';
                                component.style.height = newHeight + 'px';
                            }
                        };
                        
                        const handleResizeEnd = function() {
                            document.removeEventListener('mousemove', handleResize);
                            document.removeEventListener('mouseup', handleResizeEnd);
                            
                            // Canvas-H√∂he anpassen (mit Verz√∂gerung f√ºr bessere Berechnung)
                            setTimeout(updateCanvasSize, 50);
                            
                            saveState();
                        };
                        
                        document.addEventListener('mousemove', handleResize);
                        document.addEventListener('mouseup', handleResizeEnd);
                    }
                }
            });
        }

        // Komponente ausw√§hlen
        function selectComponent(component) {
            if (selectedComponent) {
                selectedComponent.classList.remove('selected');
            }
            selectedComponent = component;
            component.classList.add('selected');
            
            // Bearbeitungs-Toolbar anzeigen
            showComponentToolbar(component);
        }
        
        // Komponenten-Toolbar anzeigen
        function showComponentToolbar(component) {
            // Bestehende Toolbar entfernen
            const existingToolbar = document.querySelector('.component-toolbar');
            if (existingToolbar) {
                existingToolbar.remove();
            }
            
            // Neue Toolbar erstellen
            const toolbar = document.createElement('div');
            toolbar.className = 'component-toolbar';
            toolbar.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: rgba(0, 0, 0, 0.9);
                border-radius: 12px;
                padding: 15px;
                z-index: 10000;
                color: white;
                min-width: 200px;
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            `;
            
            const componentType = component.querySelector('.component-header span').textContent.split(' ')[0];
            
            toolbar.innerHTML = `
                <div style="margin-bottom: 15px; text-align: center; border-bottom: 1px solid rgba(255,255,255,0.2); padding-bottom: 10px;">
                    <strong>${componentType}</strong>
                </div>
                <div style="display: flex; flex-direction: column; gap: 8px;">
                    <button onclick="editComponent('${component.id}')" style="background: #4f46e5; color: white; border: none; padding: 8px 12px; border-radius: 6px; cursor: pointer; font-size: 12px;">‚úèÔ∏è Bearbeiten</button>
                    <button onclick="duplicateComponent('${component.id}')" style="background: #10b981; color: white; border: none; padding: 8px 12px; border-radius: 6px; cursor: pointer; font-size: 12px;">üìã Duplizieren</button>
                    <button onclick="linkComponentToFile('${component.id}')" style="background: #f59e0b; color: white; border: none; padding: 8px 12px; border-radius: 6px; cursor: pointer; font-size: 12px;">üîó Verlinken</button>
                    <button onclick="deleteComponent('${component.id}')" style="background: #ef4444; color: white; border: none; padding: 8px 12px; border-radius: 6px; cursor: pointer; font-size: 12px;">üóëÔ∏è L√∂schen</button>
                </div>
                <div style="margin-top: 15px; padding-top: 10px; border-top: 1px solid rgba(255,255,255,0.2); text-align: center;">
                    <button onclick="hideComponentToolbar()" style="background: rgba(255,255,255,0.2); color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 11px;">‚úï Schlie√üen</button>
                </div>
            `;
            
            document.body.appendChild(toolbar);
        }
        
        // Komponenten-Toolbar ausblenden
        function hideComponentToolbar() {
            const toolbar = document.querySelector('.component-toolbar');
            if (toolbar) {
                toolbar.remove();
            }
        }
        
        // Komponente bearbeiten
        function editComponent(componentId) {
            const component = document.getElementById(componentId);
            if (component) {
                currentEditingComponent = component;
                openEditModal(component);
                hideComponentToolbar(); // Toolbar ausblenden
            }
        }

        // Komponente duplizieren
        function duplicateComponent(componentId) {
            const component = document.getElementById(componentId);
            if (component) {
                const rect = component.getBoundingClientRect();
                const canvas = document.getElementById('canvas');
                const canvasRect = canvas.getBoundingClientRect();
                
                // Neue Position (leicht versetzt)
                const newX = rect.left - canvasRect.left + 20;
                const newY = rect.top - canvasRect.top + 20;
                
                // Komponente klonen
                const clonedComponent = component.cloneNode(true);
                const newUniqueId = 'component-' + Date.now() + Math.random().toString(36).substr(2, 9);
                clonedComponent.id = newUniqueId;
                clonedComponent.style.left = newX + 'px';
                clonedComponent.style.top = newY + 'px';
                
                // Alle IDs und Event-Listener neu setzen
                const actions = clonedComponent.querySelector('.component-actions');
                if (actions) {
                    actions.innerHTML = `
                        <button class="component-action" data-action="edit" data-component-id="${newUniqueId}" title="Bearbeiten">‚úèÔ∏è</button>
                        <button class="component-action" data-action="duplicate" data-component-id="${newUniqueId}" title="Duplizieren">üìã</button>
                        <button class="component-action" data-action="delete" data-component-id="${newUniqueId}" title="L√∂schen">üóëÔ∏è</button>
                        <button class="component-action" data-action="link" data-component-id="${newUniqueId}" title="Datei verkn√ºpfen">üìé</button>
                    `;
                }
                
                // Auswahl entfernen
                clonedComponent.classList.remove('selected');
                
                canvas.appendChild(clonedComponent);
                makeComponentInteractive(clonedComponent);
                
                // Alle Komponenten neu interaktiv machen
                makeAllComponentsInteractive();
                
                // Canvas-H√∂he anpassen (mit Verz√∂gerung f√ºr bessere Berechnung)
                setTimeout(updateCanvasSize, 50);
                
                saveState();
                
                // Erfolgsmeldung
                alert('‚úÖ Komponente erfolgreich dupliziert!');
                
                // Toolbar ausblenden
                hideComponentToolbar();
            }
        }

        // Komponente l√∂schen
        function deleteComponent(componentId) {
            const component = document.getElementById(componentId);
            if (component) {
                if (confirm('M√∂chten Sie diese Komponente wirklich l√∂schen?')) {
                    // Auswahl entfernen
                    if (selectedComponent === component) {
                        selectedComponent = null;
                    }
                    
                    // Toolbar ausblenden
                    hideComponentToolbar();
                    
                    // Komponente entfernen
                    component.remove();
                    
                    // Canvas-H√∂he anpassen (mit Verz√∂gerung f√ºr bessere Berechnung)
                    setTimeout(updateCanvasSize, 50);
                    
                    saveState();
                    
                    // Erfolgsmeldung
                    alert('‚úÖ Komponente erfolgreich gel√∂scht!');
                }
            }
        }

        // Komponente mit Datei verkn√ºpfen
        function linkComponentToFile(componentId) {
            const component = document.getElementById(componentId);
            if (component) {
                const linkType = prompt('Welche Art von Link m√∂chten Sie erstellen?\n1 = URL/Link\n2 = Datei\n3 = E-Mail\n4 = Telefon\n\nGeben Sie die Nummer ein:');
                
                if (linkType) {
                    let linkUrl = '';
                    let linkText = '';
                    let linkTitle = '';
                    
                    switch(linkType) {
                        case '1':
                            linkUrl = prompt('Geben Sie die URL ein (z.B. https://example.com):');
                            linkText = prompt('Geben Sie den Link-Text ein:');
                            linkTitle = prompt('Geben Sie den Link-Titel ein (optional):');
                            break;
                        case '2':
                            linkUrl = prompt('Geben Sie den Dateinamen ein (z.B. document.pdf):');
                            linkText = prompt('Geben Sie den Link-Text ein:');
                            linkTitle = 'Datei herunterladen';
                            break;
                        case '3':
                            const email = prompt('Geben Sie die E-Mail-Adresse ein:');
                            linkUrl = `mailto:${email}`;
                            linkText = prompt('Geben Sie den Link-Text ein:');
                            linkTitle = 'E-Mail senden';
                            break;
                        case '4':
                            const phone = prompt('Geben Sie die Telefonnummer ein:');
                            linkUrl = `tel:${phone}`;
                            linkText = prompt('Geben Sie den Link-Text ein:');
                            linkTitle = 'Anrufen';
                            break;
                        default:
                            alert('Ung√ºltige Auswahl!');
                            return;
                    }
                    
                    if (linkUrl && linkText) {
                        // Link in der Komponente erstellen
                        const content = component.querySelector('.component-content');
                        if (content) {
                            const link = document.createElement('a');
                            link.href = linkUrl;
                            link.textContent = linkText;
                            link.title = linkTitle || linkText;
                            link.style.cssText = 'color: #4f46e5; text-decoration: none; font-weight: 500;';
                            link.target = linkType === '1' ? '_blank' : '_self';
                            
                            // Bestehenden Inhalt durch Link ersetzen oder Link hinzuf√ºgen
                            if (linkType === '2') {
                                // F√ºr Dateien: Download-Link
                                link.download = linkUrl;
                                content.innerHTML = '';
                                content.appendChild(link);
                            } else {
                                // F√ºr andere Links: Inhalt beibehalten und Link hinzuf√ºgen
                                const existingContent = content.innerHTML;
                                content.innerHTML = existingContent + '<br><br>' + link.outerHTML;
                            }
                            
                            // Link-Informationen in der Komponente speichern
                            component.setAttribute('data-linked-url', linkUrl);
                            component.setAttribute('data-linked-text', linkText);
                            component.setAttribute('data-linked-type', linkType);
                            
                            // Visuellen Indikator hinzuf√ºgen
                            const header = component.querySelector('.component-header span');
                            if (header) {
                                const linkIcon = linkType === '1' ? 'üîó' : linkType === '2' ? 'üìé' : linkType === '3' ? 'üìß' : 'üìû';
                                header.innerHTML = `${header.textContent.split(' <span')[0]} <span style="color: #4ade80; font-size: 12px;">${linkIcon} ${linkText}</span>`;
                            }
                            
                            // Link-Button aktualisieren
                            const linkBtn = component.querySelector('button[title="Datei verkn√ºpfen"]');
                            if (linkBtn) {
                                linkBtn.innerHTML = 'üîó';
                                linkBtn.title = `Verkn√ºpft mit: ${linkText}`;
                            }
                            
                            // Canvas-H√∂he anpassen (mit Verz√∂gerung f√ºr bessere Berechnung)
                            setTimeout(updateCanvasSize, 50);
                            
                            saveState();
                            alert(`‚úÖ Link erfolgreich erstellt: ${linkText}`);
                        }
                    } else {
                        alert('‚ùå Bitte f√ºllen Sie alle erforderlichen Felder aus!');
                    }
                }
            }
        }

        // Bild-Modal √∂ffnen
        function openImageModal() {
            document.getElementById('imageModal').style.display = 'block';
            // Reset form
            document.getElementById('imageFile').value = '';
            document.getElementById('imageAlt').value = '';
            document.getElementById('imagePreviewContainer').style.display = 'none';
        }

        // Bild-Modal schlie√üen
        function closeImageModal() {
            document.getElementById('imageModal').style.display = 'none';
        }

        // Bild-Vorschau anzeigen
        function previewImage(input) {
            const file = input.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('imagePreview').src = e.target.result;
                    document.getElementById('imagePreviewContainer').style.display = 'block';
                };
                reader.readAsDataURL(file);
            }
        }

        // Bild hochladen und einf√ºgen
        function uploadImage() {
            const fileInput = document.getElementById('imageFile');
            const altText = document.getElementById('imageAlt').value || 'Bild';
            const size = document.getElementById('imageSize').value;
            
            if (!fileInput.files[0]) {
                alert('Bitte w√§hlen Sie ein Bild aus!');
                return;
            }

            const file = fileInput.files[0];
            const reader = new FileReader();
            
            reader.onload = function(e) {
                // Bild in die ausgew√§hlte Komponente einf√ºgen
                if (selectedComponent) {
                    const content = selectedComponent.querySelector('.component-content');
                    if (content) {
                        let width, height;
                        switch(size) {
                            case 'small': width = 300; height = 200; break;
                            case 'medium': width = 600; height = 400; break;
                            case 'large': width = 900; height = 600; break;
                            default: width = 600; height = 400;
                        }
                        
                        const img = document.createElement('img');
                        img.src = e.target.result;
                        img.alt = altText;
                        img.style.width = width + 'px';
                        img.style.height = height + 'px';
                        img.style.maxWidth = '100%';
                        img.style.borderRadius = '8px';
                        img.style.boxShadow = '0 2px 10px rgba(0,0,0,0.1)';
                        
                        content.innerHTML = '';
                        content.appendChild(img);
                        
                        // Bild bearbeitbar machen
                        img.addEventListener('click', function() {
                            openImageModal();
                        });
                        
                        // Canvas-H√∂he anpassen (mit Verz√∂gerung f√ºr bessere Berechnung)
                        setTimeout(updateCanvasSize, 50);
                        
                        saveState();
                        closeImageModal();
                        alert('‚úÖ Bild erfolgreich eingef√ºgt!');
                    }
                } else {
                    alert('Bitte w√§hlen Sie zuerst eine Komponente aus!');
                }
            };
            
            reader.readAsDataURL(file);
        }

        // Bearbeitungs-Modal √∂ffnen
        function openEditModal(component) {
            const modal = document.getElementById('editModal');
            const content = document.getElementById('editModalContent');
            
            const componentType = component.querySelector('.component-header span').textContent.split(' ')[0];
            
            let editForm = '';
            switch(componentType) {
                case '√úberschrift':
                    const currentHeading = component.querySelector('h1, h2, h3');
                    const currentHeadingSize = currentHeading ? currentHeading.tagName.toLowerCase() : 'h1';
                    editForm = `
                        <div class="form-group">
                            <label>√úberschrift:</label>
                            <input type="text" id="editHeading" value="${currentHeading?.textContent || ''}" placeholder="√úberschrift eingeben">
                        </div>
                        <div class="form-group">
                            <label>Gr√∂√üe:</label>
                            <select id="editHeadingSize">
                                <option value="h1" ${currentHeadingSize === 'h1' ? 'selected' : ''}>H1 (Gro√ü)</option>
                                <option value="h2" ${currentHeadingSize === 'h2' ? 'selected' : ''}>H2 (Mittel)</option>
                                <option value="h3" ${currentHeadingSize === 'h3' ? 'selected' : ''}>H3 (Klein)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Farbe:</label>
                            <input type="color" id="editHeadingColor" value="#333333">
                        </div>
                    `;
                    break;
                case 'Absatz':
                    editForm = `
                        <div class="form-group">
                            <label>Text:</label>
                            <textarea id="editParagraph" rows="4" placeholder="Text eingeben">${component.querySelector('p')?.textContent || ''}</textarea>
                        </div>
                        <div class="form-group">
                            <label>Textfarbe:</label>
                            <input type="color" id="editParagraphColor" value="#333333">
                        </div>
                        <div class="form-group">
                            <label>Schriftgr√∂√üe:</label>
                            <select id="editParagraphSize">
                                <option value="14px">14px</option>
                                <option value="16px" selected>16px</option>
                                <option value="18px">18px</option>
                                <option value="20px">20px</option>
                            </select>
                        </div>
                    `;
                    break;
                case 'Button':
                    const currentButton = component.querySelector('button');
                    const currentButtonColor = currentButton ? currentButton.style.background || '#4f46e5' : '#4f46e5';
                    editForm = `
                        <div class="form-group">
                            <label>Button-Text:</label>
                            <input type="text" id="editButtonText" value="${currentButton?.textContent || ''}" placeholder="Button-Text eingeben">
                        </div>
                        <div class="form-group">
                            <label>Farbe:</label>
                            <input type="color" id="editButtonColor" value="${currentButtonColor}">
                        </div>
                        <div class="form-group">
                            <label>Link-URL (optional):</label>
                            <input type="url" id="editButtonUrl" placeholder="https://example.com">
                        </div>
                        <div class="form-group">
                            <label>Gr√∂√üe:</label>
                            <select id="editButtonSize">
                                <option value="small">Klein</option>
                                <option value="medium" selected>Mittel</option>
                                <option value="large">Gro√ü</option>
                            </select>
                        </div>
                    `;
                    break;
                case 'Bild':
                    const currentImage = component.querySelector('img');
                    editForm = `
                        <div class="form-group">
                            <label>Alternativtext:</label>
                            <input type="text" id="editImageAlt" value="${currentImage?.alt || ''}" placeholder="Beschreibung des Bildes">
                        </div>
                        <div class="form-group">
                            <label>Breite (px):</label>
                            <input type="number" id="editImageWidth" value="${currentImage ? parseInt(currentImage.style.width) || 300 : 300}" min="50" max="1200">
                        </div>
                        <div class="form-group">
                            <label>H√∂he (px):</label>
                            <input type="number" id="editImageHeight" value="${currentImage ? parseInt(currentImage.style.height) || 200 : 200}" min="50" max="800">
                        </div>
                        <div class="form-group">
                            <label>Link-URL (optional):</label>
                            <input type="url" id="editImageUrl" placeholder="https://example.com">
                        </div>
                    `;
                    break;
                case 'Formular':
                    const currentForm = component.querySelector('form');
                    const currentFormTitle = currentForm ? currentForm.querySelector('h3')?.textContent || '' : '';
                    editForm = `
                        <div class="form-group">
                            <label>Formular-Titel:</label>
                            <input type="text" id="editFormTitle" value="${currentFormTitle}" placeholder="Formular-Titel">
                        </div>
                        <div class="form-group">
                            <label>Action-URL:</label>
                            <input type="url" id="editFormAction" value="${currentForm?.action || ''}" placeholder="https://example.com/submit">
                        </div>
                        <div class="form-group">
                            <label>Methode:</label>
                            <select id="editFormMethod">
                                <option value="POST" selected>POST</option>
                                <option value="GET">GET</option>
                            </select>
                        </div>
                    `;
                    break;
                case 'Container':
                    editForm = `
                        <div class="form-group">
                            <label>Container-Titel:</label>
                            <input type="text" id="editContainerTitle" placeholder="Container-Titel">
                        </div>
                        <div class="form-group">
                            <label>Hintergrundfarbe:</label>
                            <input type="color" id="editContainerBg" value="#ffffff">
                        </div>
                        <div class="form-group">
                            <label>Rahmen:</label>
                            <select id="editContainerBorder">
                                <option value="none">Kein Rahmen</option>
                                <option value="1px solid #ddd">D√ºnn</option>
                                <option value="2px solid #ccc">Mittel</option>
                                <option value="3px solid #999">Dick</option>
                            </select>
                        </div>
                    `;
                    break;
                default:
                    editForm = `
                        <div class="form-group">
                            <label>Inhalt bearbeiten:</label>
                            <div style="border: 1px solid #ddd; padding: 10px; border-radius: 4px; background: #f9f9f9;">
                                <small>Klicken Sie direkt in die Komponente um den Inhalt zu bearbeiten</small>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Hintergrundfarbe:</label>
                            <input type="color" id="editDefaultBg" value="#ffffff">
                        </div>
                        <div class="form-group">
                            <label>Textfarbe:</label>
                            <input type="color" id="editDefaultText" value="#333333">
                        </div>
                    `;
            }
            
            content.innerHTML = editForm;
            modal.style.display = 'block';
            
            // Event-Listener f√ºr Button-URL hinzuf√ºgen
            if (componentType === 'Button') {
                const urlInput = document.getElementById('editButtonUrl');
                if (urlInput) {
                    urlInput.addEventListener('change', function() {
                        const url = this.value;
                        if (url) {
                            const button = component.querySelector('button');
                            if (button) {
                                button.onclick = function() {
                                    window.open(url, '_blank');
                                };
                            }
                        }
                    });
                }
            }
        }

        // Bearbeitungs-Modal schlie√üen
        function closeEditModal() {
            document.getElementById('editModal').style.display = 'none';
            currentEditingComponent = null;
        }

        // Komponenten-Bearbeitung speichern
        function saveComponentEdit() {
            if (!currentEditingComponent) return;
            
            const componentType = currentEditingComponent.querySelector('.component-header span').textContent.split(' ')[0];
            
            try {
                switch(componentType) {
                    case '√úberschrift':
                        const headingText = document.getElementById('editHeading').value;
                        const headingSize = document.getElementById('editHeadingSize').value;
                        const headingColor = document.getElementById('editHeadingColor').value;
                        const headingElement = currentEditingComponent.querySelector('h1, h2, h3');
                        if (headingElement && headingText) {
                            headingElement.textContent = headingText;
                            headingElement.style.color = headingColor;
                            // Tag-Name korrekt √§ndern
                            const newHeading = document.createElement(headingSize.toUpperCase());
                            newHeading.textContent = headingText;
                            newHeading.style.color = headingColor;
                            headingElement.parentNode.replaceChild(newHeading, headingElement);
                        }
                        break;
                    case 'Absatz':
                        const paragraphText = document.getElementById('editParagraph').value;
                        const paragraphColor = document.getElementById('editParagraphColor').value;
                        const paragraphSize = document.getElementById('editParagraphSize').value;
                        const paragraphElement = currentEditingComponent.querySelector('p');
                        if (paragraphElement && paragraphText) {
                            paragraphElement.textContent = paragraphText;
                            paragraphElement.style.color = paragraphColor;
                            paragraphElement.style.fontSize = paragraphSize;
                        }
                        break;
                    case 'Button':
                        const buttonText = document.getElementById('editButtonText').value;
                        const buttonColor = document.getElementById('editButtonColor').value;
                        const buttonUrl = document.getElementById('editButtonUrl').value;
                        const buttonSize = document.getElementById('editButtonSize').value;
                        const buttonElement = currentEditingComponent.querySelector('button');
                        if (buttonElement && buttonText) {
                            buttonElement.textContent = buttonText;
                            buttonElement.style.background = buttonColor;
                            buttonElement.style.color = 'white';
                            buttonElement.style.border = 'none';
                            
                            // Button-Gr√∂√üe anpassen
                            switch(buttonSize) {
                                case 'small':
                                    buttonElement.style.padding = '8px 16px';
                                    buttonElement.style.fontSize = '14px';
                                    break;
                                case 'medium':
                                    buttonElement.style.padding = '10px 20px';
                                    buttonElement.style.fontSize = '16px';
                                    break;
                                case 'large':
                                    buttonElement.style.padding = '12px 24px';
                                    buttonElement.style.fontSize = '18px';
                                    break;
                            }
                            
                            buttonElement.style.borderRadius = '6px';
                            buttonElement.style.cursor = 'pointer';
                            buttonElement.style.fontWeight = '500';
                            
                            // URL-Link hinzuf√ºgen
                            if (buttonUrl) {
                                buttonElement.onclick = function() {
                                    window.open(buttonUrl, '_blank');
                                };
                            }
                        }
                        break;
                    case 'Bild':
                        const imageAlt = document.getElementById('editImageAlt')?.value;
                        const imageWidth = document.getElementById('editImageWidth')?.value;
                        const imageHeight = document.getElementById('editImageHeight')?.value;
                        const imageUrl = document.getElementById('editImageUrl')?.value;
                        
                        const imageElement = currentEditingComponent.querySelector('img');
                        if (imageElement) {
                            if (imageAlt) imageElement.alt = imageAlt;
                            if (imageWidth) imageElement.style.width = imageWidth + 'px';
                            if (imageHeight) imageElement.style.height = imageHeight + 'px';
                            
                            // Bild-Link hinzuf√ºgen
                            if (imageUrl) {
                                const link = document.createElement('a');
                                link.href = imageUrl;
                                link.target = '_blank';
                                imageElement.parentNode.insertBefore(link, imageElement);
                                link.appendChild(imageElement);
                            }
                        }
                        break;
                    case 'Formular':
                        const formTitle = document.getElementById('editFormTitle')?.value;
                        const formAction = document.getElementById('editFormAction')?.value;
                        const formMethod = document.getElementById('editFormMethod')?.value;
                        
                        const formElement = currentEditingComponent.querySelector('form');
                        if (formElement) {
                            if (formTitle) {
                                const titleElement = formElement.querySelector('h3');
                                if (titleElement) titleElement.textContent = formTitle;
                            }
                            if (formAction) formElement.action = formAction;
                            if (formMethod) formElement.method = formMethod;
                        }
                        break;
                    case 'Container':
                        const containerTitle = document.getElementById('editContainerTitle')?.value;
                        const containerBg = document.getElementById('editContainerBg')?.value;
                        const containerBorder = document.getElementById('editContainerBorder')?.value;
                        
                        if (containerTitle) {
                            const header = currentEditingComponent.querySelector('.component-header span');
                            if (header) {
                                header.textContent = containerTitle;
                            }
                        }
                        if (containerBg) {
                            currentEditingComponent.style.background = containerBg;
                        }
                        if (containerBorder) {
                            currentEditingComponent.style.border = containerBorder;
                        }
                        break;
                    default:
                        // F√ºr andere Komponenten: Allgemeine Einstellungen
                        const defaultBg = document.getElementById('editDefaultBg')?.value;
                        const defaultText = document.getElementById('editDefaultText')?.value;
                        
                        if (defaultBg) {
                            currentEditingComponent.style.background = defaultBg;
                        }
                        if (defaultText) {
                            const content = currentEditingComponent.querySelector('.component-content');
                            if (content) {
                                content.style.color = defaultText;
                            }
                        }
                        
                        // Inhalt direkt bearbeitbar machen
                        const content = currentEditingComponent.querySelector('.component-content');
                        if (content) {
                            content.contentEditable = true;
                            content.focus();
                            
                            // Speichern-Button hinzuf√ºgen
                            const saveBtn = document.createElement('button');
                            saveBtn.textContent = 'üíæ Speichern';
                            saveBtn.style.cssText = 'position: absolute; top: 5px; right: 5px; background: #28a745; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer; font-size: 12px; z-index: 1000;';
                            saveBtn.onclick = () => {
                                content.contentEditable = false;
                                saveBtn.remove();
                                saveState();
                                alert('‚úÖ √Ñnderungen gespeichert!');
                            };
                            currentEditingComponent.appendChild(saveBtn);
                        }
                        break;
                }
                
                // Canvas-H√∂he anpassen (mit Verz√∂gerung f√ºr bessere Berechnung)
                setTimeout(updateCanvasSize, 50);
                
                saveState();
                closeEditModal();
                alert('‚úÖ √Ñnderungen erfolgreich gespeichert!');
                
            } catch (error) {
                console.error('Fehler beim Speichern der Komponente:', error);
                alert('‚ùå Fehler beim Speichern der √Ñnderungen');
            }
        }

        // Bearbeitungsmodus umschalten
        function toggleEditMode() {
            editMode = !editMode;
            const canvas = document.getElementById('canvas');
            if (editMode) {
                canvas.classList.add('edit-mode');
            } else {
                canvas.classList.remove('edit-mode');
            }
        }

        // Vorschau
        function previewPage() {
            const canvas = document.getElementById('canvas');
            const htmlContent = canvas.innerHTML;
            
            const newWindow = window.open('', '_blank');
            if (newWindow) {
                newWindow.document.write(`
                    <!DOCTYPE html>
                    <html>
                    <head>
                        <title>Vorschau</title>
                        <style>
                            body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
                            .canvas-component { position: relative; margin: 10px 0; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
                            .component-header { display: none; }
                            .component-content { color: #333; }
                        </style>
                    </head>
                    <body>
                        ${htmlContent}
                    </body>
                    </html>
                `);
                newWindow.document.close();
            }
        }

        // Projekt manuell speichern
        function saveProject() {
            const canvas = document.getElementById('canvas');
            const project = {
                id: Date.now(),
                name: 'Projekt ' + new Date().toLocaleDateString(),
                components: canvas.innerHTML,
                timestamp: new Date().toISOString()
            };
            
            localStorage.setItem('savedProject', JSON.stringify(project));
            lastSavedState = canvas.innerHTML;
            hasUnsavedChanges = false;
            
            updateAutoSaveStatus('‚úì Manuell gespeichert um ' + new Date().toLocaleTimeString());
            console.log('‚úÖ Projekt manuell gespeichert');
            
            // Speichern-Status nach 3 Sekunden ausblenden
            setTimeout(() => {
                const saveSection = document.getElementById('saveStatusSection');
                if (saveSection && !hasUnsavedChanges) {
                    saveSection.style.display = 'none';
                }
            }, 3000);
        }

        // Projekt laden
        function loadProject() {
            try {
                const savedProject = localStorage.getItem('savedProject');
                if (savedProject) {
                    const project = JSON.parse(savedProject);
                    const canvas = document.getElementById('canvas');
                    if (canvas) {
                        if (confirm(`M√∂chten Sie das gespeicherte Projekt "${project.name}" laden? Das aktuelle Projekt wird √ºberschrieben.`)) {
                            canvas.innerHTML = project.components;
                            makeAllComponentsInteractive();
                            
                            // Canvas-H√∂he anpassen (mit Verz√∂gerung f√ºr bessere Berechnung)
                            setTimeout(updateCanvasSize, 100);
                            
                            // Status zur√ºcksetzen
                            lastSavedState = project.components;
                            hasUnsavedChanges = false;
                            
                            // Speichern-Status ausblenden
                            const saveSection = document.getElementById('saveStatusSection');
                            if (saveSection) {
                                saveSection.style.display = 'none';
                            }
                            
                            saveState();
                            alert(`‚úÖ Projekt "${project.name}" erfolgreich geladen!`);
                        }
                    }
                } else {
                    alert('‚ùå Kein gespeichertes Projekt gefunden!');
                }
            } catch (error) {
                console.error('Fehler beim Laden des Projekts:', error);
                alert('‚ùå Fehler beim Laden des Projekts');
            }
        }

        // Canvas l√∂schen
        function clearCanvas() {
            if (confirm('M√∂chten Sie wirklich alle Komponenten l√∂schen?')) {
                const canvas = document.getElementById('canvas');
                canvas.innerHTML = '<div class="canvas-placeholder">üéØ Ziehen Sie Komponenten hierher<br><small>Oder bewegen Sie die Maus an den linken Rand f√ºr das Schnell-Men√º</small></div>';
                selectedComponent = null;
                
                // Canvas-H√∂he anpassen (mit Verz√∂gerung f√ºr bessere Berechnung)
                setTimeout(updateCanvasSize, 50);
                
                // Status zur√ºcksetzen
                lastSavedState = canvas.innerHTML;
                hasUnsavedChanges = false;
                
                // Speichern-Status ausblenden
                const saveSection = document.getElementById('saveStatusSection');
                if (saveSection) {
                    saveSection.style.display = 'none';
                }
                
                saveState();
            }
        }

        // Projekt exportieren
        function exportProject() {
            const canvas = document.getElementById('canvas');
            const htmlContent = canvas.innerHTML;
            
            const fullHTML = `<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exportiertes Projekt</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .canvas-component { position: relative; margin: 10px 0; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .component-header { display: none; }
        .component-content { color: #333; }
        img { max-width: 100%; height: auto; }
    </style>
</head>
<body>
    <div class="exported-content">
        ${htmlContent}
    </div>
</body>
</html>`;
            
            const blob = new Blob([fullHTML], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'projekt-export-' + Date.now() + '.html';
            a.click();
            URL.revokeObjectURL(url);
            
            alert('‚úÖ Projekt erfolgreich exportiert!');
        }
        
        // Vollansicht umschalten
        function toggleFullCanvas() {
            const canvas = document.getElementById('canvas');
            const sidebar = document.querySelector('.sidebar');
            const toolbar = document.querySelector('.toolbar');
            
            if (canvas.classList.contains('full-canvas')) {
                canvas.classList.remove('full-canvas');
                sidebar.style.display = 'flex';
                toolbar.style.display = 'flex';
            } else {
                canvas.classList.add('full-canvas');
                sidebar.style.display = 'none';
                toolbar.style.display = 'none';
            }
        }
        
        // Intelligentes Auto-Save System
        function saveState() {
            const canvas = document.getElementById('canvas');
            const currentState = canvas.innerHTML;
            
            // F√ºr Undo/Redo
            undoStack.push(currentState);
            redoStack = [];
            
            // Auto-Save Status pr√ºfen
            if (currentState !== lastSavedState) {
                hasUnsavedChanges = true;
                showSaveStatus();
                scheduleAutoSave();
            }
        }
        
        // Auto-Save planen
        function scheduleAutoSave() {
            if (autoSaveTimer) {
                clearTimeout(autoSaveTimer);
            }
            
            autoSaveTimer = setTimeout(() => {
                if (hasUnsavedChanges) {
                    autoSave();
                }
            }, 5000); // 5 Sekunden nach der letzten √Ñnderung
        }
        
        // Auto-Save ausf√ºhren
        function autoSave() {
            if (hasUnsavedChanges) {
                const canvas = document.getElementById('canvas');
                const project = {
                    id: Date.now(),
                    name: 'Auto-Save ' + new Date().toLocaleTimeString(),
                    components: canvas.innerHTML,
                    timestamp: new Date().toISOString()
                };
                
                localStorage.setItem('savedProject', JSON.stringify(project));
                lastSavedState = canvas.innerHTML;
                hasUnsavedChanges = false;
                
                updateAutoSaveStatus('‚úì Auto-gespeichert um ' + new Date().toLocaleTimeString());
                console.log('‚úÖ Projekt automatisch gespeichert');
            }
        }
        
        // Speichern-Status anzeigen
        function showSaveStatus() {
            const saveSection = document.getElementById('saveStatusSection');
            if (saveSection) {
                saveSection.style.display = 'flex';
            }
        }
        
        // Auto-Save Status aktualisieren
        function updateAutoSaveStatus(message) {
            const statusElement = document.getElementById('autoSaveStatus');
            if (statusElement) {
                statusElement.textContent = message;
                statusElement.style.color = '#10b981';
                
                // Nach 3 Sekunden zur√ºcksetzen
                setTimeout(() => {
                    statusElement.textContent = '‚úì Auto-Save aktiv';
                    statusElement.style.color = '#10b981';
                }, 3000);
            }
        }

        function undoAction() {
            if (undoStack.length > 0) {
                const canvas = document.getElementById('canvas');
                const currentState = canvas.innerHTML;
                redoStack.push(currentState);
                
                const previousState = undoStack.pop();
                canvas.innerHTML = previousState;
                
                // Alle Komponenten neu interaktiv machen
                makeAllComponentsInteractive();
                
                // Canvas-H√∂he anpassen (mit Verz√∂gerung f√ºr bessere Berechnung)
                setTimeout(updateCanvasSize, 50);
            }
        }

        function redoAction() {
            if (redoStack.length > 0) {
                const canvas = document.getElementById('canvas');
                const currentState = canvas.innerHTML;
                undoStack.push(currentState);
                
                const nextState = redoStack.pop();
                canvas.innerHTML = nextState;
                
                // Alle Komponenten neu interaktiv machen
                makeAllComponentsInteractive();
                
                // Canvas-H√∂he anpassen (mit Verz√∂gerung f√ºr bessere Berechnung)
                setTimeout(updateCanvasSize, 50);
            }
        }

        // Schnell-Men√º Toggle
        function toggleQuickMenu() {
            const quickMenu = document.getElementById('quickMenu');
            if (quickMenu.classList.contains('show')) {
                quickMenu.classList.remove('show');
            } else {
                quickMenu.classList.add('show');
            }
        }
        
        // Komponente in der Mitte hinzuf√ºgen
        function addComponentAtCenter(type) {
            const canvas = document.getElementById('canvas');
            const rect = canvas.getBoundingClientRect();
            const x = rect.width / 2 - 100;
            const y = rect.height / 2 - 50;
            
            addComponent(type, x, y);
            
            // Schnell-Men√º schlie√üen
            document.getElementById('quickMenu').classList.remove('show');
        }
        
        // Template laden
        function loadTemplate(templateType) {
            if (confirm('M√∂chten Sie das aktuelle Projekt durch das Template ersetzen?')) {
                const canvas = document.getElementById('canvas');
                const templates = {
                    business: `
                        <div class="canvas-component" style="position: absolute; left: 50px; top: 50px; width: 300px; height: 80px;">
                            <div class="component-header"><span>Header</span><div class="component-actions"><button class="component-action" data-action="edit" title="Bearbeiten">‚úèÔ∏è</button><button class="component-action" data-action="duplicate" title="Duplizieren">üìã</button><button class="component-action" data-action="delete" title="L√∂schen">üóëÔ∏è</button><button class="component-action" data-action="link" title="Datei verkn√ºpfen">üìé</button></div></div>
                            <div class="component-content"><h1 contenteditable="true">Unternehmensname</h1><p contenteditable="true">Professionelle L√∂sungen f√ºr Ihr Business</p></div>
                        </div>
                        <div class="canvas-component" style="position: absolute; left: 50px; top: 200px; width: 300px; height: 120px;">
                            <div class="component-header"><span>√úber uns</span><div class="component-actions"><button class="component-action" data-action="edit" title="Bearbeiten">‚úèÔ∏è</button><button class="component-action" data-action="duplicate" title="Duplizieren">üìã</button><button class="component-action" data-action="delete" title="L√∂schen">üóëÔ∏è</button><button class="component-action" data-action="link" title="Datei verkn√ºpfen">üìé</button></div></div>
                            <div class="component-content"><h2 contenteditable="true">√úber uns</h2><p contenteditable="true">Wir sind ein innovatives Unternehmen mit langj√§hriger Erfahrung in der Branche.</p></div>
                        </div>
                        <div class="canvas-component" style="position: absolute; left: 400px; top: 50px; width: 300px; height: 120px;">
                            <div class="component-header"><span>Services</span><div class="component-actions"><button class="component-action" data-action="edit" title="Bearbeiten">‚úèÔ∏è</button><button class="component-action" data-action="duplicate" title="Duplizieren">üìã</button><button class="component-action" data-action="delete" title="L√∂schen">üóëÔ∏è</button><button class="component-action" data-action="link" title="Datei verkn√ºpfen">üìé</button></div></div>
                            <div class="component-content"><h3 contenteditable="true">Unsere Services</h3><ul><li contenteditable="true">Beratung</li><li contenteditable="true">Entwicklung</li><li contenteditable="true">Support</li></ul></div>
                        </div>
                    `,
                    portfolio: `
                        <div class="canvas-component" style="position: absolute; left: 50px; top: 50px; width: 300px; height: 80px;">
                            <div class="component-header"><span>Portfolio Header</span><div class="component-actions"><button class="component-action" data-action="edit" title="Bearbeiten">‚úèÔ∏è</button><button class="component-action" data-action="duplicate" title="Duplizieren">üìã</button><button class="component-action" data-action="delete" title="L√∂schen">üóëÔ∏è</button><button class="component-action" data-action="link" title="Datei verkn√ºpfen">üìé</button></div></div>
                            <div class="component-content"><h1 contenteditable="true">Kreative Arbeiten</h1><p contenteditable="true">Entdecken Sie mein Portfolio</p></div>
                        </div>
                        <div class="canvas-component" style="position: absolute; left: 50px; top: 200px; width: 200px; height: 200px;">
                            <div class="component-header"><span>Projekt 1</span><div class="component-actions"><button class="component-action" data-action="edit" title="Bearbeiten">‚úèÔ∏è</button><button class="component-action" data-action="duplicate" title="Duplizieren">üìã</button><button class="component-action" data-action="delete" title="L√∂schen">üóëÔ∏è</button><button class="component-action" data-action="link" title="Datei verkn√ºpfen">üìé</button></div></div>
                            <div class="component-content"><div style="background: #f0f0f0; height: 120px; display: flex; align-items: center; justify-content: center; border-radius: 4px; margin-bottom: 10px;">üñºÔ∏è</div><h3 contenteditable="true">Projekt Name</h3><p contenteditable="true">Beschreibung des Projekts</p></div>
                        </div>
                        <div class="canvas-component" style="position: absolute; left: 300px; top: 200px; width: 200px; height: 200px;">
                            <div class="component-header"><span>Projekt 2</span><div class="component-actions"><button class="component-action" data-action="edit" title="Bearbeiten">‚úèÔ∏è</button><button class="component-action" data-action="duplicate" title="Duplizieren">üìã</button><button class="component-action" data-action="delete" title="L√∂schen">üóëÔ∏è</button><button class="component-action" data-action="link" title="Datei verkn√ºpfen">üìé</button></div></div>
                            <div class="component-content"><div style="background: #f0f0f0; height: 120px; display: flex; align-items: center; justify-content: center; border-radius: 4px; margin-bottom: 10px;">üñºÔ∏è</div><h3 contenteditable="true">Projekt Name</h3><p contenteditable="true">Beschreibung des Projekts</p></div>
                        </div>
                    `,
                    blog: `
                        <div class="canvas-component" style="position: absolute; left: 50px; top: 50px; width: 300px; height: 80px;">
                            <div class="component-header"><span>Blog Header</span><div class="component-actions"><button class="component-action" data-action="edit" title="Bearbeiten">‚úèÔ∏è</button><button class="component-action" data-action="duplicate" title="Duplizieren">üìã</button><button class="component-action" data-action="delete" title="L√∂schen">üóëÔ∏è</button><button class="component-action" data-action="link" title="Datei verkn√ºpfen">üìé</button></div></div>
                            <div class="component-content"><h1 contenteditable="true">Mein Blog</h1><p contenteditable="true">Gedanken und Ideen teilen</p></div>
                        </div>
                        <div class="canvas-component" style="position: absolute; left: 50px; top: 200px; width: 400px; height: 150px;">
                            <div class="component-header"><span>Blog Artikel</span><div class="component-actions"><button class="component-action" data-action="edit" title="Bearbeiten">‚úèÔ∏è</button><button class="component-action" data-action="duplicate" title="Duplizieren">üìã</button><button class="component-action" data-action="delete" title="L√∂schen">üóëÔ∏è</button><button class="component-action" data-action="link" title="Datei verkn√ºpfen">üìé</button></div></div>
                            <div class="component-content"><h2 contenteditable="true">Artikel Titel</h2><p contenteditable="true">Hier steht der Artikelinhalt. Klicken Sie um den Text zu bearbeiten...</p><div style="margin-top: 10px;"><span style="color: #666; font-size: 14px;">Datum: </span><time contenteditable="true">15. Januar 2025</time></div></div>
                        </div>
                    `,
                    ecommerce: `
                        <div class="canvas-component" style="position: absolute; left: 50px; top: 50px; width: 300px; height: 80px;">
                            <div class="component-header"><span>Shop Header</span><div class="component-actions"><button class="component-action" data-action="edit" title="Bearbeiten">‚úèÔ∏è</button><button class="component-action" data-action="duplicate" title="Duplizieren">üìã</button><button class="component-action" data-action="delete" title="L√∂schen">üóëÔ∏è</button><button class="component-action" data-action="link" title="Datei verkn√ºpfen">üìé</button></div></div>
                            <div class="component-content"><h1 contenteditable="true">Online Shop</h1><p contenteditable="true">Qualit√§tsprodukte zu besten Preisen</p></div>
                        </div>
                        <div class="canvas-component" style="position: absolute; left: 50px; top: 200px; width: 200px; height: 250px;">
                            <div class="component-header"><span>Produkt 1</span><div class="component-actions"><button class="component-action" data-action="edit" title="Bearbeiten">‚úèÔ∏è</button><button class="component-action" data-action="duplicate" title="Duplizieren">üìã</button><button class="component-action" data-action="delete" title="L√∂schen">üóëÔ∏è</button><button class="component-action" data-action="link" title="Datei verkn√ºpfen">üìé</button></div></div>
                            <div class="component-content"><div style="background: #f0f0f0; height: 120px; display: flex; align-items: center; justify-content: center; border-radius: 4px; margin-bottom: 10px;">üñºÔ∏è</div><h3 contenteditable="true">Produkt Name</h3><p contenteditable="true">Produktbeschreibung</p><div style="font-size: 18px; font-weight: bold; color: #e53e3e; margin: 10px 0;">‚Ç¨29.99</div><button style="background: #28a745; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">In den Warenkorb</button></div>
                        </div>
                        <div class="canvas-component" style="position: absolute; left: 300px; top: 200px; width: 200px; height: 250px;">
                            <div class="component-header"><span>Produkt 2</span><div class="component-actions"><button class="component-action" data-action="edit" title="Bearbeiten">‚úèÔ∏è</button><button class="component-action" data-action="duplicate" title="Duplizieren">üìã</button><button class="component-action" data-action="delete" title="L√∂schen">üóëÔ∏è</button><button class="component-action" data-action="link" title="Datei verkn√ºpfen">üìé</button></div></div>
                            <div class="component-content"><div style="background: #f0f0f0; height: 120px; display: flex; align-items: center; justify-content: center; border-radius: 4px; margin-bottom: 10px;">üñºÔ∏è</div><h3 contenteditable="true">Produkt Name</h3><p contenteditable="true">Produktbeschreibung</p><div style="font-size: 18px; font-weight: bold; color: #e53e3e; margin: 10px 0;">‚Ç¨39.99</div><button style="background: #28a745; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">In den Warenkorb</button></div>
                        </div>
                    `,
                    landing: `
                        <div class="canvas-component" style="position: absolute; left: 50px; top: 50px; width: 400px; height: 100px;">
                            <div class="component-header"><span>Hero Section</span><div class="component-actions"><button class="component-action" data-action="edit" title="Bearbeiten">‚úèÔ∏è</button><button class="component-action" data-action="duplicate" title="Duplizieren">üìã</button><button class="component-action" data-action="delete" title="L√∂schen">üóëÔ∏è</button><button class="component-action" data-action="link" title="Datei verkn√ºpfen">üìé</button></div></div>
                            <div class="component-content"><h1 contenteditable="true">√úberzeugende √úberschrift</h1><p contenteditable="true">Untertitel, der die Aufmerksamkeit erregt</p></div>
                        </div>
                        <div class="canvas-component" style="position: absolute; left: 50px; top: 200px; width: 400px; height: 80px;">
                            <div class="component-header"><span>Call to Action</span><div class="component-actions"><button class="component-action" data-action="edit" title="Bearbeiten">‚úèÔ∏è</button><button class="component-action" data-action="duplicate" title="Duplizieren">üìã</button><button class="component-action" data-action="delete" title="L√∂schen">üóëÔ∏è</button><button class="component-action" data-action="link" title="Datei verkn√ºpfen">üìé</button></div></div>
                            <div class="component-content"><p contenteditable="true">Bereit loszulegen?</p><button style="background: #e53e3e; color: white; border: none; padding: 15px 30px; border-radius: 6px; font-size: 18px; cursor: pointer; margin-top: 10px;">Jetzt starten</button></div>
                        </div>
                    `,
                    corporate: `
                        <div class="canvas-component" style="position: absolute; left: 50px; top: 50px; width: 400px; height: 120px;">
                            <div class="component-header"><span>Corporate Header</span><div class="component-actions"><button class="component-action" data-action="edit" title="Bearbeiten">‚úèÔ∏è</button><button class="component-action" data-action="duplicate" title="Duplizieren">üìã</button><button class="component-action" data-action="delete" title="L√∂schen">üóëÔ∏è</button><button class="component-action" data-action="link" title="Datei verkn√ºpfen">üìé</button></div></div>
                            <div class="component-content"><h1 contenteditable="true">Willkommen bei [Unternehmen]</h1><p contenteditable="true">Ihr vertrauensvoller Partner f√ºr innovative Gesch√§ftsl√∂sungen</p></div>
                        </div>
                        <div class="canvas-component" style="position: absolute; left: 50px; top: 220px; width: 350px; height: 180px;">
                            <div class="component-header"><span>Vision & Mission</span><div class="component-actions"><button class="component-action" data-action="edit" title="Bearbeiten">‚úèÔ∏è</button><button class="component-action" data-action="duplicate" title="Duplizieren">üìã</button><button class="component-action" data-action="delete" title="L√∂schen">üóëÔ∏è</button><button class="component-action" data-action="link" title="Datei verkn√ºpfen">üìé</button></div></div>
                            <div class="component-content"><h2 contenteditable="true">Unsere Vision</h2><p contenteditable="true">Wir streben danach, die f√ºhrende Kraft in der Branche zu sein und innovative L√∂sungen zu entwickeln, die das Leben der Menschen verbessern.</p><h3 contenteditable="true">Unsere Mission</h3><p contenteditable="true">Durch kontinuierliche Innovation und exzellenten Service schaffen wir nachhaltigen Wert f√ºr unsere Kunden und Partner.</p></div>
                        </div>
                        <div class="canvas-component" style="position: absolute; left: 450px; top: 50px; width: 350px; height: 200px;">
                            <div class="component-header"><span>Leistungen</span><div class="component-actions"><button class="component-action" data-action="edit" title="Bearbeiten">‚úèÔ∏è</button><button class="component-action" data-action="duplicate" title="Duplizieren">üìã</button><button class="component-action" data-action="delete" title="L√∂schen">üóëÔ∏è</button><button class="component-action" data-action="link" title="Datei verkn√ºpfen">üìé</button></div></div>
                            <div class="component-content"><h3 contenteditable="true">Unsere Kernkompetenzen</h3><div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;"><div style="background: #f8f9fa; padding: 15px; border-radius: 6px; text-align: center;"><div style="font-size: 24px; margin-bottom: 8px;">üíº</div><div style="font-weight: 500;">Strategische Beratung</div></div><div style="background: #f8f9fa; padding: 15px; border-radius: 6px; text-align: center;"><div style="font-size: 24px; margin-bottom: 8px;">üöÄ</div><div style="font-weight: 500;">Digitale Transformation</div></div></div></div>
                        </div>
                    `,
                    restaurant: `
                        <div class="canvas-component" style="position: absolute; left: 50px; top: 50px; width: 400px; height: 120px;">
                            <div class="component-header"><span>Restaurant Header</span><div class="component-actions"><button class="component-action" data-action="edit" title="Bearbeiten">‚úèÔ∏è</button><button class="component-action" data-action="duplicate" title="Duplizieren">üìã</button><button class="component-action" data-action="delete" title="L√∂schen">üóëÔ∏è</button><button class="component-action" data-action="link" title="Datei verkn√ºpfen">üìé</button></div></div>
                            <div class="component-content"><h1 contenteditable="true">[Restaurant Name]</h1><p contenteditable="true">Authentische K√ºche in gem√ºtlicher Atmosph√§re</p></div>
                        </div>
                        <div class="canvas-component" style="position: absolute; left: 50px; top: 220px; width: 350px; height: 150px;">
                            <div class="component-header"><span>√úber uns</span><div class="component-actions"><button class="component-action" data-action="edit" title="Bearbeiten">‚úèÔ∏è</button><button class="component-action" data-action="duplicate" title="Duplizieren">üìã</button><button class="component-action" data-action="delete" title="L√∂schen">üóëÔ∏è</button><button class="component-action" data-action="link" title="Datei verkn√ºpfen">üìé</button></div></div>
                            <div class="component-content"><h2 contenteditable="true">Unsere Geschichte</h2><p contenteditable="true">Seit √ºber 20 Jahren servieren wir unseren G√§sten die besten Gerichte der Region. Unsere K√ºche verbindet Tradition mit modernen Zubereitungsmethoden.</p></div>
                        </div>
                        <div class="canvas-component" style="position: absolute; left: 450px; top: 50px; width: 350px; height: 200px;">
                            <div class="component-header"><span>Speisekarte</span><div class="component-actions"><button class="component-action" data-action="edit" title="Bearbeiten">‚úèÔ∏è</button><button class="component-action" data-action="duplicate" title="Duplizieren">üìã</button><button class="component-action" data-action="delete" title="L√∂schen">üóëÔ∏è</button><button class="component-action" data-action="link" title="Datei verkn√ºpfen">üìé</button></div></div>
                            <div class="component-content"><h3 contenteditable="true">Unsere Spezialit√§ten</h3><div style="margin-top: 15px;"><div style="display: flex; justify-content: space-between; margin-bottom: 10px;"><span contenteditable="true">Hausgemachte Pasta</span><span style="color: #e53e3e; font-weight: 500;">‚Ç¨18.90</span></div><div style="display: flex; justify-content: space-between; margin-bottom: 10px;"><span contenteditable="true">Gegrilltes Lamm</span><span style="color: #e53e3e; font-weight: 500;">‚Ç¨24.90</span></div><div style="display: flex; justify-content: space-between;"><span contenteditable="true">Tiramisu</span><span style="color: #e53e3e; font-weight: 500;">‚Ç¨8.90</span></div></div></div>
                        </div>
                    `
                };
                
                const template = templates[templateType];
                if (template) {
                    canvas.innerHTML = template;
                    
                    // Alle Komponenten interaktiv machen
                    const components = canvas.querySelectorAll('.canvas-component');
                    components.forEach(component => {
                        component.id = 'component-' + Date.now() + Math.random().toString(36).substr(2, 9);
                        makeComponentInteractive(component);
                    });
                    
                    // Alle Komponenten interaktiv machen
                    makeAllComponentsInteractive();
                    
                    // Canvas-H√∂he anpassen (mit Verz√∂gerung f√ºr bessere Berechnung)
                    setTimeout(updateCanvasSize, 100);
                    
                    // Status zur√ºcksetzen
                    lastSavedState = canvas.innerHTML;
                    hasUnsavedChanges = false;
                    
                    // Speichern-Status ausblenden
                    const saveSection = document.getElementById('saveStatusSection');
                    if (saveSection) {
                        saveSection.style.display = 'none';
                    }
                    
                    saveState();
                    alert(`‚úÖ ${templateType.charAt(0).toUpperCase() + templateType.slice(1)} Template erfolgreich geladen!`);
                }
            }
        }
        
        // Verbesserte Fehlerbehandlung und Validierung
        function validateSettings() {
            const errors = [];
            
            const siteName = document.getElementById('siteName').value.trim();
            if (!siteName) {
                errors.push('Website-Name ist erforderlich');
            }
            
            const sessionTimeout = parseInt(document.getElementById('sessionTimeout').value);
            if (sessionTimeout < 5 || sessionTimeout > 480) {
                errors.push('Session-Timeout muss zwischen 5 und 480 Minuten liegen');
            }
            
            const maxLoginAttempts = parseInt(document.getElementById('maxLoginAttempts').value);
            if (maxLoginAttempts < 3 || maxLoginAttempts > 10) {
                errors.push('Max. Login-Versuche muss zwischen 3 und 10 liegen');
            }
            
            const adminEmail = document.getElementById('adminEmail').value.trim();
            if (adminEmail && !isValidEmail(adminEmail)) {
                errors.push('Ung√ºltige E-Mail-Adresse');
            }
            
            return errors;
        }
        
        function isValidEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }
        
        // Verbesserte Einstellungen speichern
        function saveSettings() {
            const errors = validateSettings();
            
            if (errors.length > 0) {
                alert('‚ùå Fehler beim Speichern:\n' + errors.join('\n'));
                return;
            }
            
            try {
                const settings = {
                    siteName: document.getElementById('siteName').value.trim(),
                    defaultLang: document.getElementById('defaultLang').value,
                    timezone: document.getElementById('timezone').value,
                    sessionTimeout: parseInt(document.getElementById('sessionTimeout').value),
                    maxLoginAttempts: parseInt(document.getElementById('maxLoginAttempts').value),
                    smtpServer: document.getElementById('smtpServer').value.trim(),
                    adminEmail: document.getElementById('adminEmail').value.trim(),
                    emailTemplate: document.getElementById('emailTemplate').value,
                    googleAnalytics: document.getElementById('googleAnalytics').value.trim(),
                    searchConsole: document.getElementById('searchConsole').value.trim(),
                    defaultKeywords: document.getElementById('defaultKeywords').value.trim(),
                    enableCache: document.getElementById('enableCache').value === 'true',
                    debugMode: document.getElementById('debugMode').value === 'true',
                    backupFrequency: document.getElementById('backupFrequency').value,
                    timestamp: new Date().toISOString()
                };
                
                localStorage.setItem('modxSettings', JSON.stringify(settings));
                alert('‚úÖ Einstellungen erfolgreich gespeichert!');
                
                // Einstellungen sofort anwenden
                applySettings(settings);
            } catch (error) {
                console.error('Fehler beim Speichern der Einstellungen:', error);
                alert('‚ùå Fehler beim Speichern der Einstellungen');
            }
        }
        
        // Einstellungen anwenden
        function applySettings(settings) {
            if (settings.siteName) {
                document.title = settings.siteName + ' - Advanced Builder';
            }
            
            // Zeitzone anwenden
            if (settings.timezone) {
                try {
                    Intl.DateTimeFormat().resolvedOptions().timeZone = settings.timezone;
                } catch (e) {
                    console.warn('Zeitzone konnte nicht angewendet werden:', e);
                }
            }
        }
        
        // Keyboard Shortcuts hinzuf√ºgen
        function initializeKeyboardShortcuts() {
            document.addEventListener('keydown', function(e) {
                // Strg+S zum Speichern
                if (e.ctrlKey && e.key === 's') {
                    e.preventDefault();
                    saveProject();
                }
                
                // Strg+Z zum R√ºckg√§ngig
                if (e.ctrlKey && e.key === 'z') {
                    e.preventDefault();
                    undoAction();
                }
                
                // Strg+Y zum Wiederholen
                if (e.ctrlKey && e.key === 'y') {
                    e.preventDefault();
                    redoAction();
                }
                
                // Strg+E zum Bearbeitungsmodus
                if (e.ctrlKey && e.key === 'e') {
                    e.preventDefault();
                    toggleEditMode();
                }
                
                // Strg+F f√ºr Vollansicht
                if (e.ctrlKey && e.key === 'f') {
                    e.preventDefault();
                    toggleFullCanvas();
                }
                
                // Escape zum Schlie√üen des Quick-Men√ºs
                if (e.key === 'Escape') {
                    const quickMenu = document.getElementById('quickMenu');
                    if (quickMenu.classList.contains('show')) {
                        toggleQuickMenu();
                    }
                    // Auch Modals schlie√üen
                    closeImageModal();
                    closeEditModal();
                }
                
                // Delete-Taste zum L√∂schen ausgew√§hlter Komponente
                if (e.key === 'Delete' && selectedComponent) {
                    e.preventDefault();
                    deleteComponent(selectedComponent.id);
                }
            });
        }
        
        // Einstellungen laden
        function loadSettings() {
            try {
                const savedSettings = localStorage.getItem('modxSettings');
                if (savedSettings) {
                    const settings = JSON.parse(savedSettings);
                    document.getElementById('siteName').value = settings.siteName || 'MODX CMS Builder';
                    document.getElementById('defaultLang').value = settings.defaultLang || 'de';
                    document.getElementById('timezone').value = settings.timezone || 'Europe/Berlin';
                    document.getElementById('sessionTimeout').value = settings.sessionTimeout || 30;
                    document.getElementById('maxLoginAttempts').value = settings.maxLoginAttempts || 5;
                    document.getElementById('smtpServer').value = settings.smtpServer || '';
                    document.getElementById('adminEmail').value = settings.adminEmail || '';
                    document.getElementById('emailTemplate').value = settings.emailTemplate || 'default';
                    document.getElementById('googleAnalytics').value = settings.googleAnalytics || '';
                    document.getElementById('searchConsole').value = settings.searchConsole || '';
                    document.getElementById('defaultKeywords').value = settings.defaultKeywords || '';
                    document.getElementById('enableCache').value = settings.enableCache ? 'true' : 'false';
                    document.getElementById('debugMode').value = settings.debugMode ? 'true' : 'false';
                    document.getElementById('backupFrequency').value = settings.backupFrequency || 'weekly';
                    
                    // Einstellungen anwenden
                    applySettings(settings);
                }
            } catch (error) {
                console.error('Fehler beim Laden der Einstellungen:', error);
            }
        }
        
        // Alle Komponenten interaktiv machen
        function makeAllComponentsInteractive() {
            const components = document.querySelectorAll('.canvas-component');
            components.forEach(component => {
                makeComponentInteractive(component);
            });
        }

        // Initialisierung
        document.addEventListener('DOMContentLoaded', function() {
            initializeDragAndDrop();
            initializeKeyboardShortcuts();
            loadSettings();
            makeAllComponentsInteractive();
            
            // Gespeichertes Projekt laden
            try {
                const savedProject = localStorage.getItem('savedProject');
                if (savedProject) {
                    const project = JSON.parse(savedProject);
                    const canvas = document.getElementById('canvas');
                    if (canvas) {
                        canvas.innerHTML = project.components;
                        makeAllComponentsInteractive();
                        
                        // Canvas-H√∂he anpassen (mit Verz√∂gerung f√ºr bessere Berechnung)
                        setTimeout(updateCanvasSize, 100);
                        
                        // Status setzen
                        lastSavedState = project.components;
                        hasUnsavedChanges = false;
                    }
                } else {
                    // Kein gespeichertes Projekt - Status zur√ºcksetzen
                    const canvas = document.getElementById('canvas');
                    if (canvas) {
                        lastSavedState = canvas.innerHTML;
                        hasUnsavedChanges = false;
                    }
                }
            } catch (error) {
                console.error('Fehler beim Laden des gespeicherten Projekts:', error);
            }
            
            // Initiale Canvas-H√∂he setzen
            setTimeout(updateCanvasSize, 100);
            
            // Canvas-H√∂he bei Fenster-Resize aktualisieren
            window.addEventListener('resize', function() {
                setTimeout(updateCanvasSize, 100);
            });
            
            console.log('‚úÖ MODX-Style CMS erfolgreich geladen!');
            
            // Beim Verlassen der Seite speichern
            window.addEventListener('beforeunload', function() {
                if (hasUnsavedChanges) {
                    autoSave();
                }
            });
        });

        // Erweiterte Toolbar-Funktionen
        function showPageStructure() {
            const modal = createModal('üìÑ Seitenstruktur', `
                <div style="max-height: 400px; overflow-y: auto;">
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                        <h4 style="margin: 0 0 10px 0;">Aktuelle Seitenstruktur</h4>
                        <div id="pageStructureTree">
                            <div style="padding: 8px; border-left: 3px solid #4f46e5; margin: 5px 0;">
                                <strong>üè† Startseite</strong>
                                <div style="margin-left: 20px; color: #666;">
                                    <div>üìù √úberschrift</div>
                                    <div>üìÑ Absatz</div>
                                    <div>üñºÔ∏è Bild</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Neue Seite hinzuf√ºgen:</label>
                        <input type="text" id="newPageName" placeholder="Seitenname">
                    </div>
                    <div class="form-group">
                        <label>√úbergeordnete Seite:</label>
                        <select id="parentPage">
                            <option value="">Keine (Top-Level)</option>
                            <option value="home">Startseite</option>
                        </select>
                    </div>
                </div>
            `, [
                { text: 'Seite hinzuf√ºgen', class: 'btn-success', onclick: 'addNewPage()' },
                { text: 'Schlie√üen', class: 'btn-secondary', onclick: 'closeModal()' }
            ]);
        }
        
        function showMediaLibrary() {
            const modal = createModal('üñºÔ∏è Medienverwaltung', `
                <div style="max-height: 400px; overflow-y: auto;">
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                        <h4 style="margin: 0 0 10px 0;">Medien hochladen</h4>
                        <div class="image-upload-area" onclick="openImageModal()">
                            <div>üñºÔ∏è Klicken Sie hier um Medien hochzuladen</div>
                            <div style="font-size: 12px; margin-top: 5px; color: #666;">Drag & Drop oder Klick</div>
                        </div>
                    </div>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                        <h4 style="margin: 0 0 10px 0;">Vorhandene Medien</h4>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;">
                            <div style="background: white; padding: 10px; border-radius: 6px; text-align: center; cursor: pointer;" onclick="selectMedia('image1')">
                                <div style="font-size: 24px; margin-bottom: 5px;">üñºÔ∏è</div>
                                <div style="font-size: 12px;">Bild 1</div>
                            </div>
                            <div style="background: white; padding: 10px; border-radius: 6px; text-align: center; cursor: pointer;" onclick="selectMedia('image2')">
                                <div style="font-size: 24px; margin-bottom: 5px;">üñºÔ∏è</div>
                                <div style="font-size: 12px;">Bild 2</div>
                            </div>
                            <div style="background: white; padding: 10px; border-radius: 6px; text-align: center; cursor: pointer;" onclick="selectMedia('image3')">
                                <div style="font-size: 24px; margin-bottom: 5px;">üñºÔ∏è</div>
                                <div style="font-size: 12px;">Bild 3</div>
                            </div>
                        </div>
                    </div>
                </div>
            `, [
                { text: 'Schlie√üen', class: 'btn-secondary', onclick: 'closeModal()' }
            ]);
        }
        
        function showDesignPanel() {
            const modal = createModal('üé® Design-Einstellungen', `
                <div style="max-height: 400px; overflow-y: auto;">
                    <div class="form-group">
                        <label>Prim√§rfarbe:</label>
                        <input type="color" id="primaryColor" value="#4f46e5">
                    </div>
                    <div class="form-group">
                        <label>Sekund√§rfarbe:</label>
                        <input type="color" id="secondaryColor" value="#6366f1">
                    </div>
                    <div class="form-group">
                        <label>Schriftart:</label>
                        <select id="fontFamily">
                            <option value="'Segoe UI', Tahoma, Geneva, Verdana, sans-serif">Segoe UI</option>
                            <option value="Arial, sans-serif">Arial</option>
                            <option value="'Times New Roman', serif">Times New Roman</option>
                            <option value="'Courier New', monospace">Courier New</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Schriftgr√∂√üe:</label>
                        <select id="fontSize">
                            <option value="14px">14px</option>
                            <option value="16px">16px</option>
                            <option value="18px">18px</option>
                            <option value="20px">20px</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Rahmen-Stil:</label>
                        <select id="borderStyle">
                            <option value="solid">Solid</option>
                            <option value="dashed">Dashed</option>
                            <option value="dotted">Dotted</option>
                            <option value="none">Kein Rahmen</option>
                        </select>
                    </div>
                </div>
            `, [
                { text: 'Anwenden', class: 'btn-success', onclick: 'applyDesignSettings()' },
                { text: 'Schlie√üen', class: 'btn-secondary', onclick: 'closeModal()' }
            ]);
        }
        
        function showLayoutGrid() {
            const modal = createModal('üìê Layout-Grid', `
                <div style="max-height: 400px; overflow-y: auto;">
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                        <h4 style="margin: 0 0 10px 0;">Grid-Einstellungen</h4>
                        <div class="form-group">
                            <label>Spalten:</label>
                            <select id="gridColumns">
                                <option value="1">1 Spalte</option>
                                <option value="2">2 Spalten</option>
                                <option value="3">3 Spalten</option>
                                <option value="4">4 Spalten</option>
                                <option value="6">6 Spalten</option>
                                <option value="12">12 Spalten</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Abstand zwischen Spalten:</label>
                            <input type="range" id="gridGap" min="0" max="50" value="20">
                            <span id="gapValue">20px</span>
                        </div>
                    </div>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                        <h4 style="margin: 0 0 10px 0;">Vorschau</h4>
                        <div id="gridPreview" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; padding: 20px; background: white; border-radius: 6px;">
                            <div style="background: #e3f2fd; padding: 20px; border-radius: 4px; text-align: center;">Spalte 1</div>
                            <div style="background: #e3f2fd; padding: 20px; border-radius: 4px; text-align: center;">Spalte 2</div>
                            <div style="background: #e3f2fd; padding: 20px; border-radius: 4px; text-align: center;">Spalte 3</div>
                        </div>
                    </div>
                </div>
            `, [
                { text: 'Grid anwenden', class: 'btn-success', onclick: 'applyGridLayout()' },
                { text: 'Schlie√üen', class: 'btn-secondary', onclick: 'closeModal()' }
            ]);
            
            // Grid-Vorschau aktualisieren
            document.getElementById('gridColumns').addEventListener('change', updateGridPreview);
            document.getElementById('gridGap').addEventListener('input', updateGridPreview);
        }
        
        function showResponsivePreview() {
            const modal = createModal('üì± Responsive Vorschau', `
                <div style="max-height: 400px; overflow-y: auto;">
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                        <h4 style="margin: 0 0 10px 0;">Ger√§te-Vorschau</h4>
                        <div style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
                            <button class="btn btn-secondary" onclick="setPreviewSize('desktop')" style="padding: 8px 16px;">üñ•Ô∏è Desktop</button>
                            <button class="btn btn-secondary" onclick="setPreviewSize('tablet')" style="padding: 8px 16px;">üì± Tablet</button>
                            <button class="btn btn-secondary" onclick="setPreviewSize('mobile')" style="padding: 8px 16px;">üì± Mobile</button>
                        </div>
                    </div>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                        <h4 style="margin: 0 0 10px 0;">Aktuelle Vorschau: <span id="currentPreviewSize">Desktop</span></h4>
                        <div id="responsivePreviewContainer" style="border: 2px solid #ddd; border-radius: 8px; overflow: hidden; background: white;">
                            <div id="responsivePreview" style="width: 100%; min-height: 300px; background: #f5f5f5; display: flex; align-items: center; justify-content: center;">
                                <div style="text-align: center; color: #666;">
                                    <div style="font-size: 24px; margin-bottom: 10px;">üì±</div>
                                    <p>Responsive Vorschau wird hier angezeigt</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `, [
                { text: 'Schlie√üen', class: 'btn-secondary', onclick: 'closeModal()' }
            ]);
        }
        
        function showSEOEditor() {
            const modal = createModal('üîç SEO-Editor', `
                <div style="max-height: 400px; overflow-y: auto;">
                    <div class="form-group">
                        <label>Meta-Titel:</label>
                        <input type="text" id="metaTitle" placeholder="Seitentitel f√ºr Suchmaschinen" value="Meine Website - Professionelle L√∂sungen">
                    </div>
                    <div class="form-group">
                        <label>Meta-Beschreibung:</label>
                        <textarea id="metaDescription" rows="3" placeholder="Kurze Beschreibung der Seite">Professionelle Website mit modernem Design und benutzerfreundlicher Oberfl√§che.</textarea>
                    </div>
                    <div class="form-group">
                        <label>Keywords:</label>
                        <input type="text" id="metaKeywords" placeholder="Schl√ºsselw√∂rter, getrennt durch Kommas" value="Website, Design, CMS, MODX">
                    </div>
                    <div class="form-group">
                        <label>Canonical URL:</label>
                        <input type="url" id="canonicalUrl" placeholder="https://example.com/seite">
                    </div>
                    <div class="form-group">
                        <label>Robots:</label>
                        <select id="robotsMeta">
                            <option value="index,follow">Index, Follow</option>
                            <option value="noindex,follow">No Index, Follow</option>
                            <option value="index,nofollow">Index, No Follow</option>
                            <option value="noindex,nofollow">No Index, No Follow</option>
                        </select>
                    </div>
                    <div style="background: #e8f5e8; padding: 15px; border-radius: 8px; margin-top: 15px;">
                        <h4 style="margin: 0 0 10px 0; color: #2e7d32;">SEO-Bewertung: 85/100</h4>
                        <div style="font-size: 14px; color: #2e7d32;">
                            ‚úÖ Meta-Titel optimiert<br>
                            ‚úÖ Meta-Beschreibung vorhanden<br>
                            ‚ö†Ô∏è Keywords k√∂nnten optimiert werden<br>
                            ‚úÖ Canonical URL gesetzt
                        </div>
                    </div>
                </div>
            `, [
                { text: 'SEO speichern', class: 'btn-success', onclick: 'saveSEOSettings()' },
                { text: 'Schlie√üen', class: 'btn-secondary', onclick: 'closeModal()' }
            ]);
        }
        
        function showUserManagement() {
            const modal = createModal('üë• Benutzerverwaltung', `
                <div style="max-height: 400px; overflow-y: auto;">
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                        <h4 style="margin: 0 0 10px 0;">Neuen Benutzer hinzuf√ºgen</h4>
                        <div class="form-group">
                            <label>Benutzername:</label>
                            <input type="text" id="newUsername" placeholder="Benutzername">
                        </div>
                        <div class="form-group">
                            <label>E-Mail:</label>
                            <input type="email" id="newUserEmail" placeholder="E-Mail-Adresse">
                        </div>
                        <div class="form-group">
                            <label>Rolle:</label>
                            <select id="newUserRole">
                                <option value="admin">Administrator</option>
                                <option value="editor">Redakteur</option>
                                <option value="author">Autor</option>
                                <option value="subscriber">Abonnent</option>
                            </select>
                        </div>
                    </div>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                        <h4 style="margin: 0 0 10px 0;">Vorhandene Benutzer</h4>
                        <div style="max-height: 200px; overflow-y: auto;">
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: white; border-radius: 6px; margin-bottom: 8px;">
                                <div>
                                    <strong>admin</strong><br>
                                    <small>admin@example.com - Administrator</small>
                                </div>
                                <button class="btn btn-secondary" style="padding: 4px 8px; font-size: 12px;">Bearbeiten</button>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: white; border-radius: 6px; margin-bottom: 8px;">
                                <div>
                                    <strong>editor</strong><br>
                                    <small>editor@example.com - Redakteur</small>
                                </div>
                                <button class="btn btn-secondary" style="padding: 4px 8px; font-size: 12px;">Bearbeiten</button>
                            </div>
                        </div>
                    </div>
                </div>
            `, [
                { text: 'Benutzer hinzuf√ºgen', class: 'btn-success', onclick: 'addNewUser()' },
                { text: 'Schlie√üen', class: 'btn-secondary', onclick: 'closeModal()' }
            ]);
        }
        
        function showPluginManager() {
            const modal = createModal('üîå Plugin-Manager', `
                <div style="max-height: 400px; overflow-y: auto;">
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                        <h4 style="margin: 0 0 10px 0;">Verf√ºgbare Plugins</h4>
                        <div style="max-height: 200px; overflow-y: auto;">
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: white; border-radius: 6px; margin-bottom: 8px;">
                                <div>
                                    <strong>SEO Pro</strong><br>
                                    <small>Erweiterte SEO-Funktionen</small>
                                </div>
                                <button class="btn btn-success" style="padding: 4px 8px; font-size: 12px;">Installieren</button>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: white; border-radius: 6px; margin-bottom: 8px;">
                                <div>
                                    <strong>E-Commerce</strong><br>
                                    <small>Online-Shop Funktionalit√§t</small>
                                </div>
                                <button class="btn btn-success" style="padding: 4px 8px; font-size: 12px;">Installieren</button>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: white; border-radius: 6px; margin-bottom: 8px;">
                                <div>
                                    <strong>Newsletter</strong><br>
                                    <small>E-Mail Marketing Tools</small>
                                </div>
                                <button class="btn btn-success" style="padding: 4px 8px; font-size: 12px;">Installieren</button>
                            </div>
                        </div>
                    </div>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                        <h4 style="margin: 0 0 10px 0;">Installierte Plugins</h4>
                        <div style="max-height: 150px; overflow-y: auto;">
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: white; border-radius: 6px; margin-bottom: 8px;">
                                <div>
                                    <strong>FormIt</strong><br>
                                    <small>Formular-Management</small>
                                </div>
                                <button class="btn btn-danger" style="padding: 4px 8px; font-size: 12px;">Deaktivieren</button>
                            </div>
                        </div>
                    </div>
                </div>
            `, [
                { text: 'Schlie√üen', class: 'btn-secondary', onclick: 'closeModal()' }
            ]);
        }
        
        function showVersionControl() {
            const modal = createModal('üìö Versionierung', `
                <div style="max-height: 400px; overflow-y: auto;">
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                        <h4 style="margin: 0 0 10px 0;">Neue Version erstellen</h4>
                        <div class="form-group">
                            <label>Versionsname:</label>
                            <input type="text" id="versionName" placeholder="z.B. v1.2.0">
                        </div>
                        <div class="form-group">
                            <label>Beschreibung:</label>
                            <textarea id="versionDescription" rows="3" placeholder="Beschreibung der √Ñnderungen"></textarea>
                        </div>
                    </div>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                        <h4 style="margin: 0 0 10px 0;">Versionsverlauf</h4>
                        <div style="max-height: 200px; overflow-y: auto;">
                            <div style="padding: 10px; background: white; border-radius: 6px; margin-bottom: 8px; border-left: 4px solid #28a745;">
                                <strong>v1.1.0</strong> - 15.01.2025<br>
                                <small>Neue Komponenten hinzugef√ºgt, UI verbessert</small>
                            </div>
                            <div style="padding: 10px; background: white; border-radius: 6px; margin-bottom: 8px; border-left: 4px solid #28a745;">
                                <strong>v1.0.0</strong> - 10.01.2025<br>
                                <small>Erste Version ver√∂ffentlicht</small>
                            </div>
                        </div>
                    </div>
                </div>
            `, [
                { text: 'Version erstellen', class: 'btn-success', onclick: 'createNewVersion()' },
                { text: 'Schlie√üen', class: 'btn-secondary', onclick: 'closeModal()' }
            ]);
        }
        
        function showAnalytics() {
            const modal = createModal('üìä Analytics & Statistiken', `
                <div style="max-height: 400px; overflow-y: auto;">
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                        <h4 style="margin: 0 0 10px 0;">Besucher-Statistiken</h4>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
                            <div style="background: white; padding: 15px; border-radius: 6px; text-align: center;">
                                <div style="font-size: 24px; font-weight: bold; color: #4f46e5;">1,247</div>
                                <div style="font-size: 12px; color: #666;">Besucher heute</div>
                            </div>
                            <div style="background: white; padding: 15px; border-radius: 6px; text-align: center;">
                                <div style="font-size: 24px; font-weight: bold; color: #10b981;">8,934</div>
                                <div style="font-size: 12px; color: #666;">Besucher diese Woche</div>
                            </div>
                        </div>
                    </div>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                        <h4 style="margin: 0 0 10px 0;">Top-Seiten</h4>
                        <div style="max-height: 150px; overflow-y: auto;">
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px; background: white; border-radius: 6px; margin-bottom: 6px;">
                                <span>Startseite</span>
                                <span style="font-weight: bold; color: #4f46e5;">45%</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px; background: white; border-radius: 6px; margin-bottom: 6px;">
                                <span>√úber uns</span>
                                <span style="font-weight: bold; color: #4f46e5;">23%</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px; background: white; border-radius: 6px; margin-bottom: 6px;">
                                <span>Kontakt</span>
                                <span style="font-weight: bold; color: #4f46e5;">18%</span>
                            </div>
                        </div>
                    </div>
                </div>
            `, [
                { text: 'Detaillierte Berichte', class: 'btn-success', onclick: 'showDetailedReports()' },
                { text: 'Schlie√üen', class: 'btn-secondary', onclick: 'closeModal()' }
            ]);
        }
        
        // Hilfsfunktionen f√ºr die Modals
        function createModal(title, content, buttons) {
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.style.display = 'block';
            
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>${title}</h3>
                        <button class="modal-close" onclick="closeModal()">&times;</button>
                    </div>
                    <div class="modal-body">
                        ${content}
                    </div>
                    <div class="btn-group">
                        ${buttons.map(btn => `<button class="btn ${btn.class}" onclick="${btn.onclick}">${btn.text}</button>`).join('')}
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            return modal;
        }
        
        function closeModal() {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => modal.remove());
        }
        
        // Funktionen f√ºr die erweiterten Features
        function addNewPage() {
            const pageName = document.getElementById('newPageName').value.trim();
            if (pageName) {
                alert(`‚úÖ Neue Seite "${pageName}" wurde hinzugef√ºgt!`);
                closeModal();
            } else {
                alert('‚ùå Bitte geben Sie einen Seitennamen ein!');
            }
        }
        
        function selectMedia(mediaId) {
            alert(`‚úÖ Medien "${mediaId}" wurde ausgew√§hlt!`);
        }
        
        function applyDesignSettings() {
            const primaryColor = document.getElementById('primaryColor').value;
            const fontFamily = document.getElementById('fontFamily').value;
            const fontSize = document.getElementById('fontSize').value;
            
            // Design-Einstellungen anwenden
            document.documentElement.style.setProperty('--primary-color', primaryColor);
            document.body.style.fontFamily = fontFamily;
            document.body.style.fontSize = fontSize;
            
            alert('‚úÖ Design-Einstellungen wurden angewendet!');
            closeModal();
        }
        
        function applyGridLayout() {
            const columns = document.getElementById('gridColumns').value;
            const gap = document.getElementById('gridGap').value;
            
            // Grid-Layout anwenden
            const canvas = document.getElementById('canvas');
            canvas.style.display = 'grid';
            canvas.style.gridTemplateColumns = `repeat(${columns}, 1fr)`;
            canvas.style.gap = gap + 'px';
            
            alert(`‚úÖ Grid-Layout mit ${columns} Spalten und ${gap}px Abstand wurde angewendet!`);
            closeModal();
        }
        
        function updateGridPreview() {
            const columns = document.getElementById('gridColumns').value;
            const gap = document.getElementById('gridGap').value;
            const preview = document.getElementById('gridPreview');
            const gapValue = document.getElementById('gapValue');
            
            preview.style.gridTemplateColumns = `repeat(${columns}, 1fr)`;
            preview.style.gap = gap + 'px';
            gapValue.textContent = gap + 'px';
        }
        
        function setPreviewSize(size) {
            const container = document.getElementById('responsivePreviewContainer');
            const sizeText = document.getElementById('currentPreviewSize');
            
            switch(size) {
                case 'desktop':
                    container.style.width = '100%';
                    sizeText.textContent = 'Desktop';
                    break;
                case 'tablet':
                    container.style.width = '768px';
                    sizeText.textContent = 'Tablet';
                    break;
                case 'mobile':
                    container.style.width = '375px';
                    sizeText.textContent = 'Mobile';
                    break;
            }
        }
        
        function saveSEOSettings() {
            const title = document.getElementById('metaTitle').value;
            const description = document.getElementById('metaDescription').value;
            const keywords = document.getElementById('metaKeywords').value;
            
            // SEO-Einstellungen speichern
            localStorage.setItem('seoSettings', JSON.stringify({
                title, description, keywords,
                timestamp: new Date().toISOString()
            }));
            
            alert('‚úÖ SEO-Einstellungen wurden gespeichert!');
            closeModal();
        }
        
        function addNewUser() {
            const username = document.getElementById('newUsername').value.trim();
            const email = document.getElementById('newUserEmail').value.trim();
            const role = document.getElementById('newUserRole').value;
            
            if (username && email) {
                alert(`‚úÖ Neuer Benutzer "${username}" mit der Rolle "${role}" wurde hinzugef√ºgt!`);
                closeModal();
            } else {
                alert('‚ùå Bitte f√ºllen Sie alle Felder aus!');
            }
        }
        
        function createNewVersion() {
            const name = document.getElementById('versionName').value.trim();
            const description = document.getElementById('versionDescription').value.trim();
            
            if (name) {
                alert(`‚úÖ Neue Version "${name}" wurde erstellt!`);
                closeModal();
            } else {
                alert('‚ùå Bitte geben Sie einen Versionsnamen ein!');
            }
        }
        
        function showDetailedReports() {
            alert('üìä Detaillierte Berichte werden in einem neuen Fenster ge√∂ffnet...');
        }

        // Canvas-H√∂he dynamisch an Inhalte anpassen (smart)
        function updateCanvasSize() {
            const canvas = document.getElementById('canvas');
            if (!canvas) return;
            
            const comps = canvas.querySelectorAll('.canvas-component');
            let maxBottom = 0;

            if (comps.length === 0) {
                // Wenn keine Komponenten vorhanden sind, Standard-H√∂he setzen
                canvas.style.height = '500px';
                return;
            }

            comps.forEach(el => {
                const rect = el.getBoundingClientRect();
                const canvasRect = canvas.getBoundingClientRect();
                const bottom = (rect.bottom - canvasRect.top);
                if (bottom > maxBottom) maxBottom = bottom;
            });

            // etwas Puffer geben
            const padding = 200;
            // nie kleiner als der sichtbare Bereich
            const minHeight = Math.max(500, window.innerHeight * 0.6);
            const target = Math.max(minHeight, Math.ceil(maxBottom + padding));

            console.log('Canvas-H√∂he wird auf', target, 'px gesetzt (maxBottom:', maxBottom, 'px)');
            canvas.style.height = target + 'px';
        }
        
        // System-Informationen Vollbild-Seite
        function showSystemInfo() {
            // Vollbild-Overlay erstellen
            const overlay = document.createElement('div');
            overlay.id = 'systemInfoOverlay';
            overlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100vw;
                height: 100vh;
                background: linear-gradient(135deg, #1e40af, #3b82f6);
                z-index: 10000;
                overflow-y: auto;
                padding: 20px;
                box-sizing: border-box;
            `;
            
            // Zur√ºck-Button
            const backButton = document.createElement('button');
            backButton.innerHTML = '‚Üê Zur√ºck zur Hauptseite';
            backButton.style.cssText = `
                position: fixed;
                top: 20px;
                left: 20px;
                background: rgba(255,255,255,0.2);
                border: none;
                color: white;
                padding: 12px 20px;
                border-radius: 8px;
                cursor: pointer;
                font-size: 16px;
                font-weight: 500;
                transition: all 0.3s ease;
                z-index: 10001;
            `;
            backButton.onmouseover = () => backButton.style.background = 'rgba(255,255,255,0.3)';
            backButton.onmouseout = () => backButton.style.background = 'rgba(255,255,255,0.2)';
            backButton.onclick = () => {
                document.body.removeChild(overlay);
                document.body.removeChild(backButton);
            };
            
            // Hauptinhalt
            overlay.innerHTML = `
                <div style="max-width: 1200px; margin: 0 auto; padding-top: 80px; color: white;">
                    <!-- Header -->
                    <div style="text-align: center; margin-bottom: 50px;">
                        <h1 style="font-size: 3rem; margin-bottom: 20px; color: #e0e7ff;">üöÄ CMS System</h1>
                        <h2 style="font-size: 1.5rem; margin-bottom: 10px; color: #c7d2fe;">Entwickelt von Raymond Demitrio Tel</h2>
                        <p style="font-size: 1.1rem; color: #a5b4fc;">
                            <a href="mailto:gentlyoverdone@outlook.com" style="color: #e0e7ff; text-decoration: none;">üìß gentlyoverdone@outlook.com</a> | 
                            <a href="https://tel1.jouwweb.nl/-1" target="_blank" style="color: #e0e7ff; text-decoration: none;">üåê tel1.nl</a>
                        </p>
                        <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 12px; margin-top: 20px; display: inline-block;">
                            <p style="margin: 0; font-size: 1.1rem;">
                                üéØ <strong>Ziel:</strong> Professionelle Website-Erstellung ohne Programmierkenntnisse | 
                                üöÄ <strong>Innovation:</strong> Modulare Komponenten-Architektur | 
                                üåü <strong>Qualit√§t:</strong> Enterprise-Grade CMS-Funktionalit√§ten
                            </p>
                        </div>
                    </div>
                    
                    <!-- System-Struktur -->
                    <div style="background: rgba(255,255,255,0.1); padding: 30px; border-radius: 16px; margin-bottom: 30px; backdrop-filter: blur(10px);">
                        <h3 style="color: #e0e7ff; margin-bottom: 20px; font-size: 1.8rem;">üìã System-Struktur</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                            <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px;">
                                <h4 style="color: #c7d2fe; margin-bottom: 15px;">üåê Frontend</h4>
                                <p style="line-height: 1.6; color: #e0e7ff;">HTML5, CSS3, Vanilla JavaScript</p>
                            </div>
                            <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px;">
                                <h4 style="color: #c7d2fe; margin-bottom: 15px;">üèóÔ∏è Architektur</h4>
                                <p style="line-height: 1.6; color: #e0e7ff;">Modulare Komponenten-Architektur</p>
                            </div>
                            <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px;">
                                <h4 style="color: #c7d2fe; margin-bottom: 15px;">üíæ Speicher</h4>
                                <p style="line-height: 1.6; color: #e0e7ff;">LocalStorage f√ºr Persistenz</p>
                            </div>
                            <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px;">
                                <h4 style="color: #c7d2fe; margin-bottom: 15px;">üì± Responsive</h4>
                                <p style="line-height: 1.6; color: #e0e7ff;">Mobile-First Design-Ansatz</p>
                            </div>
                            <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px;">
                                <h4 style="color: #c7d2fe; margin-bottom: 15px;">üñ±Ô∏è Drag & Drop</h4>
                                <p style="line-height: 1.6; color: #e0e7ff;">HTML5 Drag & Drop API</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Funktionalit√§ten -->
                    <div style="background: rgba(255,255,255,0.1); padding: 30px; border-radius: 16px; margin-bottom: 30px; backdrop-filter: blur(10px);">
                        <h3 style="color: #e0e7ff; margin-bottom: 20px; font-size: 1.8rem;">üõ†Ô∏è Funktionalit√§ten</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                            <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px;">
                                <h4 style="color: #c7d2fe; margin-bottom: 15px;">üß© Komponenten</h4>
                                <p style="line-height: 1.6; color: #e0e7ff;">20+ vordefinierte UI-Komponenten</p>
                            </div>
                            <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px;">
                                <h4 style="color: #c7d2fe; margin-bottom: 15px;">üìã Templates</h4>
                                <p style="line-height: 1.6; color: #e0e7ff;">8 professionelle Layout-Vorlagen</p>
                            </div>
                            <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px;">
                                <h4 style="color: #c7d2fe; margin-bottom: 15px;">‚úèÔ∏è Bearbeitung</h4>
                                <p style="line-height: 1.6; color: #e0e7ff;">Live-Edit, Drag & Drop, Resize</p>
                            </div>
                            <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px;">
                                <h4 style="color: #c7d2fe; margin-bottom: 15px;">üíæ Auto-Save</h4>
                                <p style="line-height: 1.6; color: #e0e7ff;">Intelligentes automatisches Speichern</p>
                            </div>
                            <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px;">
                                <h4 style="color: #c7d2fe; margin-bottom: 15px;">üì§ Export</h4>
                                <p style="line-height: 1.6; color: #e0e7ff;">HTML-Export f√ºr Produktivumgebung</p>
                            </div>
                            <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px;">
                                <h4 style="color: #c7d2fe; margin-bottom: 15px;">üì± Responsive</h4>
                                <p style="line-height: 1.6; color: #e0e7ff;">Mobile, Tablet, Desktop Vorschau</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Verwendungszweck -->
                    <div style="background: rgba(255,255,255,0.1); padding: 30px; border-radius: 16px; margin-bottom: 30px; backdrop-filter: blur(10px);">
                        <h3 style="color: #e0e7ff; margin-bottom: 20px; font-size: 1.8rem;">üéØ Verwendungszweck</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                            <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px;">
                                <h4 style="color: #c7d2fe; margin-bottom: 15px;">üåê Website-Builder</h4>
                                <p style="line-height: 1.6; color: #e0e7ff;">Visueller CMS f√ºr Nicht-Programmierer</p>
                            </div>
                            <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px;">
                                <h4 style="color: #c7d2fe; margin-bottom: 15px;">üé® Prototyping</h4>
                                <p style="line-height: 1.6; color: #e0e7ff;">Schnelle Mockups und Wireframes</p>
                            </div>
                            <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px;">
                                <h4 style="color: #c7d2fe; margin-bottom: 15px;">üìù Content-Management</h4>
                                <p style="line-height: 1.6; color: #e0e7ff;">Modulare Inhaltsverwaltung</p>
                            </div>
                            <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px;">
                                <h4 style="color: #c7d2fe; margin-bottom: 15px;">üìã Template-Engine</h4>
                                <p style="line-height: 1.6; color: #e0e7ff;">Wiederverwendbare Layout-Vorlagen</p>
                            </div>
                            <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px;">
                                <h4 style="color: #c7d2fe; margin-bottom: 15px;">üìö Learning-Tool</h4>
                                <p style="line-height: 1.6; color: #e0e7ff;">Verst√§ndnis von Web-Technologien</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Technische Details -->
                    <div style="background: rgba(255,255,255,0.1); padding: 30px; border-radius: 16px; margin-bottom: 30px; backdrop-filter: blur(10px);">
                        <h3 style="color: #e0e7ff; margin-bottom: 20px; font-size: 1.8rem;">üîß Technische Details</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                            <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px;">
                                <h4 style="color: #c7d2fe; margin-bottom: 15px;">‚ö° Performance</h4>
                                <p style="line-height: 1.6; color: #e0e7ff;">Optimiert f√ºr 60fps Animationen</p>
                            </div>
                            <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px;">
                                <h4 style="color: #c7d2fe; margin-bottom: 15px;">üåê Browser-Support</h4>
                                <p style="line-height: 1.6; color: #e0e7ff;">Moderne Browser (Chrome, Firefox, Safari, Edge)</p>
                            </div>
                            <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px;">
                                <h4 style="color: #c7d2fe; margin-bottom: 15px;">üì± Offline-F√§hig</h4>
                                <p style="line-height: 1.6; color: #e0e7ff;">Funktioniert ohne Internetverbindung</p>
                            </div>
                            <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px;">
                                <h4 style="color: #c7d2fe; margin-bottom: 15px;">üîå Erweiterbar</h4>
                                <p style="line-height: 1.6; color: #e0e7ff;">Modulare Architektur f√ºr Plugins</p>
                            </div>
                            <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px;">
                                <h4 style="color: #c7d2fe; margin-bottom: 15px;">üîç SEO-freundlich</h4>
                                <p style="line-height: 1.6; color: #e0e7ff;">Semantisches HTML und Meta-Tags</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Inhaltsangabe -->
                    <div style="background: rgba(255,255,255,0.1); padding: 30px; border-radius: 16px; margin-bottom: 30px; backdrop-filter: blur(10px);">
                        <h3 style="color: #e0e7ff; margin-bottom: 20px; font-size: 1.8rem;">üìö Inhaltsangabe</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                            <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px;">
                                <h4 style="color: #c7d2fe; margin-bottom: 15px;">üìù Grundlegende Komponenten</h4>
                                <p style="line-height: 1.6; color: #e0e7ff;">√úberschriften, Abs√§tze, Buttons, Bilder</p>
                            </div>
                            <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px;">
                                <h4 style="color: #c7d2fe; margin-bottom: 15px;">üé® Erweiterte Widgets</h4>
                                <p style="line-height: 1.6; color: #e0e7ff;">Formulare, Galerien, Karten, Social Media</p>
                            </div>
                            <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px;">
                                <h4 style="color: #c7d2fe; margin-bottom: 15px;">üè¢ Enterprise Features</h4>
                                <p style="line-height: 1.6; color: #e0e7ff;">E-Commerce, Newsletter, Analytics, Workflow</p>
                            </div>
                            <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px;">
                                <h4 style="color: #c7d2fe; margin-bottom: 15px;">‚öôÔ∏è CMS-Tools</h4>
                                <p style="line-height: 1.6; color: #e0e7ff;">Seitenstruktur, Medienverwaltung, SEO, Benutzer</p>
                            </div>
                            <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px;">
                                <h4 style="color: #c7d2fe; margin-bottom: 15px;">üé® Design-System</h4>
                                <p style="line-height: 1.6; color: #e0e7ff;">Farben, Typografie, Layout, Responsive</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Innovation -->
                    <div style="background: rgba(255,255,255,0.1); padding: 30px; border-radius: 16px; margin-bottom: 30px; backdrop-filter: blur(10px);">
                        <h3 style="color: #e0e7ff; margin-bottom: 20px; font-size: 1.8rem;">üí° Innovation</h3>
                        <div style="background: rgba(255,255,255,0.05); padding: 25px; border-radius: 12px; border-left: 4px solid #e0e7ff;">
                            <p style="margin: 0; color: #e0e7ff; line-height: 1.8; font-size: 1.1rem;">
                                Dieses CMS-System kombiniert moderne Web-Technologien mit intuitiver Benutzerf√ºhrung. 
                                Es erm√∂glicht auch Nicht-Programmierern, professionelle Websites zu erstellen, 
                                w√§hrend es gleichzeitig als Lernplattform f√ºr Web-Entwicklung dient.
                            </p>
                        </div>
                    </div>
                    
                    <!-- Footer -->
                    <div style="text-align: center; padding: 30px; border-top: 1px solid rgba(255,255,255,0.2); margin-top: 50px;">
                        <p style="color: #a5b4fc; font-size: 1rem;">
                            <strong>CMS Builder v2.0</strong> | ¬© 2025 Raymond Demitrio Tel | 
                            <a href="https://tel1.jouwweb.nl/-1" target="_blank" style="color: #e0e7ff; text-decoration: none;">tel1.nl</a>
                        </p>
                    </div>
                </div>
            `;
            
            // Overlay und Button zum DOM hinzuf√ºgen
            document.body.appendChild(overlay);
            document.body.appendChild(backButton);
            
                    // ESC-Taste zum Schlie√üen
        const handleEsc = (e) => {
            if (e.key === 'Escape') {
                document.body.removeChild(overlay);
                document.body.removeChild(backButton);
                document.removeEventListener('keydown', handleEsc);
            }
        };
        document.addEventListener('keydown', handleEsc);
        
        // Content Sanitization System
        const ContentSanitizer = {
            allowedTags: [
                'p', 'br', 'strong', 'em', 'u', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6',
                'ul', 'ol', 'li', 'blockquote', 'code', 'pre', 'span', 'div', 'a',
                'img', 'table', 'thead', 'tbody', 'tr', 'td', 'th'
            ],
            allowedAttributes: {
                'a': ['href', 'target', 'title'],
                'img': ['src', 'alt', 'title', 'width', 'height'],
                'table': ['border', 'cellpadding', 'cellspacing'],
                'td': ['colspan', 'rowspan'],
                'th': ['colspan', 'rowspan']
            },
            allowedStyles: [
                'color', 'background-color', 'font-size', 'font-weight', 'text-align',
                'margin', 'padding', 'border', 'border-radius', 'width', 'height'
            ],
            sanitizeHTML(html) {
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = html;
                this.removeDisallowedTags(tempDiv);
                this.cleanAttributes(tempDiv);
                this.cleanStyles(tempDiv);
                this.removeScripts(tempDiv);
                return tempDiv.innerHTML;
            },
            removeDisallowedTags(element) {
                const disallowedTags = element.querySelectorAll('*');
                disallowedTags.forEach(tag => {
                    if (!this.allowedTags.includes(tag.tagName.toLowerCase())) {
                        tag.outerHTML = tag.innerHTML;
                    }
                });
            },
            cleanAttributes(element) {
                const allElements = element.querySelectorAll('*');
                allElements.forEach(el => {
                    const allowedAttrs = this.allowedAttributes[el.tagName.toLowerCase()] || [];
                    Array.from(el.attributes).forEach(attr => {
                        if (!allowedAttrs.includes(attr.name)) {
                            el.removeAttribute(attr.name);
                        }
                    });
                });
            },
            cleanStyles(element) {
                const allElements = element.querySelectorAll('*');
                allElements.forEach(el => {
                    if (el.style) {
                        const computedStyle = window.getComputedStyle(el);
                        const cleanStyles = {};
                        this.allowedStyles.forEach(style => {
                            if (computedStyle[style]) {
                                cleanStyles[style] = computedStyle[style];
                            }
                        });
                        el.style.cssText = Object.entries(cleanStyles)
                            .map(([key, value]) => `${key}: ${value}`)
                            .join('; ');
                    }
                });
            },
            removeScripts(element) {
                const scripts = element.querySelectorAll('script');
                scripts.forEach(script => script.remove());
            },
            isValidURL(url) {
                try {
                    new URL(url);
                    return true;
                } catch {
                    return false;
                }
            },
            sanitizeContentEditable(element) {
                if (element.contentEditable === 'true') {
                    element.innerHTML = this.sanitizeHTML(element.innerHTML);
                }
            }
        };
        
        // Enhanced makeContentEditable with sanitization
        function makeContentEditable(element, options = {}) {
            if (options.sanitize !== false) {
                ContentSanitizer.sanitizeContentEditable(element);
            }
            element.contentEditable = true;
            element.focus();
        }
        
        // IndexedDB Storage System
        const IndexedDBStorage = {
            dbName: 'CMSBuilderDB',
            dbVersion: 1,
            db: null,
            
            async init() {
                try {
                    this.db = await this.openDB();
                    console.log('IndexedDB initialized successfully');
                    return true;
                } catch (error) {
                    console.error('IndexedDB initialization failed:', error);
                    return false;
                }
            },
            
            openDB() {
                return new Promise((resolve, reject) => {
                    const request = indexedDB.open(this.dbName, this.dbVersion);
                    
                    request.onerror = () => reject(request.error);
                    request.onsuccess = () => resolve(request.result);
                    
                    request.onupgradeneeded = (event) => {
                        const db = event.target.result;
                        
                        // Create object stores
                        if (!db.objectStoreNames.contains('pages')) {
                            db.createObjectStore('pages', { keyPath: 'id', autoIncrement: true });
                        }
                        if (!db.objectStoreNames.contains('components')) {
                            db.createObjectStore('components', { keyPath: 'id', autoIncrement: true });
                        }
                        if (!db.objectStoreNames.contains('assets')) {
                            db.createObjectStore('assets', { keyPath: 'id', autoIncrement: true });
                        }
                        if (!db.objectStoreNames.contains('settings')) {
                            db.createObjectStore('settings', { keyPath: 'key' });
                        }
                        if (!db.objectStoreNames.contains('backups')) {
                            db.createObjectStore('backups', { keyPath: 'id', autoIncrement: true });
                        }
                    };
                });
            },
            
            async savePage(pageData) {
                const transaction = this.db.transaction(['pages'], 'readwrite');
                const store = transaction.objectStore('pages');
                return store.put(pageData);
            },
            
            async getPage(id) {
                const transaction = this.db.transaction(['pages'], 'readonly');
                const store = transaction.objectStore('pages');
                return store.get(id);
            },
            
            async getAllPages() {
                const transaction = this.db.transaction(['pages'], 'readonly');
                const store = transaction.objectStore('pages');
                return store.getAll();
            },
            
            async saveComponent(componentData) {
                const transaction = this.db.transaction(['components'], 'readwrite');
                const store = transaction.objectStore('components');
                return store.put(componentData);
            },
            
            async getComponent(id) {
                const transaction = this.db.transaction(['components'], 'readonly');
                const store = transaction.objectStore('components');
                return store.get(id);
            },
            
            async getAllComponents() {
                const transaction = this.db.transaction(['components'], 'readonly');
                const store = transaction.objectStore('components');
                return store.getAll();
            },
            
            async saveSetting(key, value) {
                const transaction = this.db.transaction(['settings'], 'readwrite');
                const store = transaction.objectStore('settings');
                return store.put({ key, value });
            },
            
            async getSetting(key) {
                const transaction = this.db.transaction(['settings'], 'readonly');
                const store = transaction.objectStore('settings');
                const result = await store.get(key);
                return result ? result.value : null;
            },
            
            async createBackup(name = 'auto') {
                try {
                    const pages = await this.getAllPages();
                    const components = await this.getAllComponents();
                    const settings = await this.getAllSettings();
                    
                    const backup = {
                        name,
                        timestamp: new Date().toISOString(),
                        data: { pages, components, settings },
                        version: '1.0'
                    };
                    
                    const transaction = this.db.transaction(['backups'], 'readwrite');
                    const store = transaction.objectStore('backups');
                    await store.put(backup);
                    
                    console.log(`Backup created: ${name}`);
                    return backup;
                } catch (error) {
                    console.error('Backup creation failed:', error);
                    return null;
                }
            },
            
            async getAllSettings() {
                const transaction = this.db.transaction(['settings'], 'readonly');
                const store = transaction.objectStore('settings');
                return store.getAll();
            },
            
            async getAllBackups() {
                const transaction = this.db.transaction(['backups'], 'readonly');
                const store = transaction.objectStore('backups');
                return store.getAll();
            },
            
            async restoreBackup(backupId) {
                try {
                    const backup = await this.getBackup(backupId);
                    if (!backup) return false;
                    
                    // Clear existing data
                    await this.clearAllData();
                    
                    // Restore data
                    if (backup.data.pages) {
                        for (const page of backup.data.pages) {
                            await this.savePage(page);
                        }
                    }
                    
                    if (backup.data.components) {
                        for (const component of backup.data.components) {
                            await this.saveComponent(component);
                        }
                    }
                    
                    if (backup.data.settings) {
                        for (const setting of backup.data.settings) {
                            await this.saveSetting(setting.key, setting.value);
                        }
                    }
                    
                    console.log(`Backup restored: ${backup.name}`);
                    return true;
                } catch (error) {
                    console.error('Backup restoration failed:', error);
                    return false;
                }
            },
            
            async getBackup(id) {
                const transaction = this.db.transaction(['backups'], 'readonly');
                const store = transaction.objectStore('backups');
                return store.get(id);
            },
            
            async clearAllData() {
                const stores = ['pages', 'components', 'assets', 'settings'];
                for (const storeName of stores) {
                    const transaction = this.db.transaction([storeName], 'readwrite');
                    const store = transaction.objectStore(storeName);
                    await store.clear();
                }
            },
            
            async exportBackup(backupId) {
                const backup = await this.getBackup(backupId);
                if (!backup) return null;
                
                const dataStr = JSON.stringify(backup, null, 2);
                const dataBlob = new Blob([dataStr], { type: 'application/json' });
                
                const url = URL.createObjectURL(dataBlob);
                const link = document.createElement('a');
                link.href = url;
                link.download = `cms-backup-${backup.name}-${backup.timestamp}.json`;
                link.click();
                
                URL.revokeObjectURL(url);
            },
            
            async importBackup(file) {
                try {
                    const text = await file.text();
                    const backup = JSON.parse(text);
                    
                    if (backup.data && backup.version) {
                        await this.createBackup(`imported-${backup.name || 'backup'}`);
                        await this.restoreBackup(backup.id);
                        return true;
                    }
                    return false;
                } catch (error) {
                    console.error('Backup import failed:', error);
                    return false;
                }
            },
            
            async getDatabaseSize() {
                try {
                    const pages = await this.getAllPages();
                    const components = await this.getAllComponents();
                    const settings = await this.getAllSettings();
                    const backups = await this.getAllBackups();
                    
                    const data = JSON.stringify({ pages, components, settings, backups });
                    return new Blob([data]).size;
                } catch (error) {
                    return 0;
                }
            }
        };
        
        // Initialize IndexedDB on page load
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                await IndexedDBStorage.init();
                // Auto-backup every 5 minutes
                setInterval(async () => {
                    await IndexedDBStorage.createBackup('auto');
                }, 5 * 60 * 1000);
            } catch (error) {
                console.error('IndexedDB initialization failed, falling back to localStorage');
            }
        });
        
        // Content Modeling System
        const ContentModeling = {
            contentTypes: [],
            fieldTypes: {
                text: { name: 'Text', input: 'text' },
                richtext: { name: 'Rich Text', input: 'textarea' },
                number: { name: 'Zahl', input: 'number' },
                date: { name: 'Datum', input: 'date' },
                boolean: { name: 'Boolean', input: 'checkbox' },
                select: { name: 'Auswahl', input: 'select' },
                relation: { name: 'Beziehung', input: 'select' },
                repeater: { name: 'Wiederholer', input: 'repeater' },
                media: { name: 'Medien', input: 'file' },
                json: { name: 'JSON', input: 'textarea' }
            },
            
            createContentType(name, description = '') {
                const contentType = {
                    id: Date.now(),
                    name,
                    description,
                    fields: [],
                    createdAt: new Date().toISOString(),
                    updatedAt: new Date().toISOString()
                };
                
                this.contentTypes.push(contentType);
                this.saveToStorage();
                return contentType;
            },
            
            addField(contentTypeId, field) {
                const contentType = this.contentTypes.find(ct => ct.id === contentTypeId);
                if (contentType) {
                    field.id = Date.now();
                    contentType.fields.push(field);
                    contentType.updatedAt = new Date().toISOString();
                    this.saveToStorage();
                }
            },
            
            generateForm(contentType) {
                let formHTML = `<form class="content-form">`;
                
                contentType.fields.forEach(field => {
                    formHTML += this.generateFieldHTML(field);
                });
                
                formHTML += `</form>`;
                return formHTML;
            },
            
            generateFieldHTML(field) {
                switch (field.type) {
                    case 'text':
                        return `<div class="form-group">
                            <label>${field.label}</label>
                            <input type="text" name="${field.name}" ${field.required ? 'required' : ''}>
                        </div>`;
                    case 'textarea':
                        return `<div class="form-group">
                            <label>${field.label}</label>
                            <textarea name="${field.name}" ${field.required ? 'required' : ''}></textarea>
                        </div>`;
                    case 'select':
                        return `<div class="form-group">
                            <label>${field.label}</label>
                            <select name="${field.name}" ${field.required ? 'required' : ''}>
                                ${field.options.map(opt => `<option value="${opt.value}">${opt.label}</option>`).join('')}
                            </select>
                        </div>`;
                    default:
                        return `<div class="form-group">
                            <label>${field.label}</label>
                            <input type="${field.type}" name="${field.name}" ${field.required ? 'required' : ''}>
                        </div>`;
                }
            },
            
            saveToStorage() {
                localStorage.setItem('cms_contentTypes', JSON.stringify(this.contentTypes));
            },
            
            loadFromStorage() {
                const stored = localStorage.getItem('cms_contentTypes');
                if (stored) {
                    this.contentTypes = JSON.parse(stored);
                }
            }
        };
        
        // Load content types on initialization
        ContentModeling.loadFromStorage();
        
        // CMS UI Functions
        function showContentTypes() {
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>üèóÔ∏è Content Types</h3>
                        <button class="modal-close" onclick="this.closest('.modal').remove()">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div class="content-types-list">
                            ${ContentModeling.contentTypes.map(ct => `
                                <div class="content-type-item">
                                    <h4>${ct.name}</h4>
                                    <p>${ct.description}</p>
                                    <small>${ct.fields.length} Felder</small>
                                </div>
                            `).join('') || '<p>Keine Content Types definiert</p>'}
                        </div>
                        <button onclick="createNewContentType()" class="btn btn-primary">Neuen Content Type erstellen</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }
        
        function showWorkflow() {
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>‚ö° Workflow Management</h3>
                        <button class="modal-close" onclick="this.closest('.modal').remove()">&times;</button>
                    </div>
                    <div class="modal-body">
                        <p>Workflow-System f√ºr Content-Approval und Publishing</p>
                        <div class="workflow-statuses">
                            <div class="status-item draft">üìù Draft</div>
                            <div class="status-item review">üëÄ Review</div>
                            <div class="status-item approved">‚úÖ Approved</div>
                            <div class="status-item published">üöÄ Published</div>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }
        
        function showLanguages() {
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>üåç Mehrsprachigkeit</h3>
                        <button class="modal-close" onclick="this.closest('.modal').remove()">&times;</button>
                    </div>
                    <div class="modal-body">
                        <p>Unterst√ºtzte Sprachen:</p>
                        <div class="languages-list">
                            <div class="language-item">üá©üá™ Deutsch (Standard)</div>
                            <div class="language-item">üá∫üá∏ English</div>
                            <div class="language-item">üá´üá∑ Fran√ßais</div>
                            <div class="language-item">üá™üá∏ Espa√±ol</div>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }
        
        function showNavigation() {
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>üß≠ Navigation & Routing</h3>
                        <button class="modal-close" onclick="this.closest('.modal').remove()">&times;</button>
                    </div>
                    <div class="modal-body">
                        <p>Seitenstruktur und Men√ºverwaltung</p>
                        <div class="navigation-tree">
                            <div class="nav-item">üè† Home</div>
                            <div class="nav-item">üìÑ √úber uns</div>
                            <div class="nav-item">üìû Kontakt</div>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }
        
        function showSearch() {
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>üîç Suchsystem</h3>
                        <button class="modal-close" onclick="this.closest('.modal').remove()">&times;</button>
                    </div>
                    <div class="modal-body">
                        <p>Volltext-Suche f√ºr alle Inhalte</p>
                        <input type="text" placeholder="Suchen..." class="search-input">
                        <div class="search-results">
                            <p>Geben Sie einen Suchbegriff ein...</p>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }
        
        function showPerformance() {
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>‚ö° Performance & Caching</h3>
                        <button class="modal-close" onclick="this.closest('.modal').remove()">&times;</button>
                    </div>
                    <div class="modal-body">
                        <p>Performance-Monitoring und Optimierung</p>
                        <div class="performance-metrics">
                            <div class="metric">üìä Ladezeit: <span id="loadTime">--</span></div>
                            <div class="metric">üéØ FCP: <span id="fcp">--</span></div>
                            <div class="metric">‚ö° LCP: <span id="lcp">--</span></div>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }
        
        function createNewContentType() {
            const name = prompt('Name des Content Types:');
            if (name) {
                const description = prompt('Beschreibung:');
                ContentModeling.createContentType(name, description);
                showContentTypes(); // Refresh modal
            }
        }
        }
    </script>
</body>
</html>

# Cloudflare Workers Configuration
# IBM-Standard: Zero-Defect, Industrial Fabrication Software
# Version: 1.0.0-XXXL
# Branding: T,.&T,,.&T,,,.(C)TEL1.NL

name = "together-systems"
main = "functions/index.js"
compatibility_date = "2024-01-01"

[env.production]
name = "together-systems-prod"
route = { pattern = "api.togethersystems.com/*", zone_name = "togethersystems.com" }

[env.staging]
name = "together-systems-staging"
route = { pattern = "staging-api.togethersystems.com/*", zone_name = "togethersystems.com" }

# D1 Database
[[env.production.d1_databases]]
binding = "DB"
database_name = "together-systems-db"
database_id = "YOUR_D1_DATABASE_ID"

[[env.staging.d1_databases]]
binding = "DB"
database_name = "together-systems-db-staging"
database_id = "YOUR_STAGING_D1_DATABASE_ID"

# R2 Storage
[[env.production.r2_buckets]]
binding = "ASSETS"
bucket_name = "together-systems-assets"

[[env.production.r2_buckets]]
binding = "UPLOADS"
bucket_name = "together-systems-uploads"

[[env.production.r2_buckets]]
binding = "BACKUPS"
bucket_name = "together-systems-backups"

# Environment Variables
[env.production.vars]
ENVIRONMENT = "production"
API_VERSION = "1.0.0"

[env.staging.vars]
ENVIRONMENT = "staging"
API_VERSION = "1.0.0-beta"

# Secrets (set via: wrangler secret put SECRET_NAME)
# - CLOUDFLARE_API_TOKEN
# - DATABASE_URL
# - ENCRYPTION_KEY


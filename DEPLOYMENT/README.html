<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>README</title>
<style>
body { font-family: system-ui; max-width: 800px; margin: 0 auto; padding: 20px; }
pre { background: #f5f5f5; padding: 10px; border-radius: 5px; overflow-x: auto; }
code { background: #f5f5f5; padding: 2px 4px; border-radius: 3px; }
</style>
</head>
<body>
<h1>DEPLOY ALL SERVERS - Complete Deployment Guide</h1>

<strong>LOGO:</strong> `T,.&T,,.&T,,,.(C)TEL1.NL`  
<strong>VERSION:</strong> 1.0.0-XXXL  
<strong>STATUS:</strong> Production-Ready  
<strong>DATUM:</strong> 2025-01-15  

---

<h2>üöÄ SCHNELLSTART</h2>

<h3>Windows (PowerShell):</h3>
```powershell
cd DEPLOYMENT
.\deploy-all.ps1
```

<h3>Linux/Mac (Bash):</h3>
```bash
cd DEPLOYMENT
chmod +x deploy-all.sh
./deploy-all.sh
```

<h3>Node.js (Universal):</h3>
```bash
cd DEPLOYMENT
node deploy-all-servers.js
```

---

<h2>üìã WAS WIRD DEPLOYED</h2>

<h3>1. ‚òÅÔ∏è Cloudflare Workers</h3>
- `functions/api/telbank/transfers.js` - TELBANK Transfer API
- `functions/api/presence/verify.js` - Presence Verification
- `functions/api/presence/heartbeat.js` - Presence Heartbeat
- `functions/api/presence/match.js` - Presence Matching
- `functions/ws.js` - WebSocket Signaling

<h3>2. üíæ D1 Database</h3>
- `TELBANK/d1-schema-telbank-negative-assets.sql` - Negative Assets Schema
- `d1-schema.sql` - Main Database Schema

<h3>3. üóÑÔ∏è R2 Storage</h3>
- `together-systems-assets` - Asset Storage
- `together-systems-uploads` - Upload Storage
- `together-systems-backups` - Backup Storage

<h3>4. üìÑ GitHub Pages</h3>
- `index.html` - Main Portal
- `manifest-forum.html` - Offline Forum
- `manifest-portal.html` - Online Portal
- `honeycomb.html` - Honeycomb Rooms
- `legal-hub.html` - Legal Hub
- `TELBANK/index.html` - TELBANK Console
- `TELADIA/teladia-portal-redesign.html` - TELADIA Portal

<h3>5. üé® Frontend Assets</h3>
- `assets/` - Branding & Images
- `css/` - Stylesheets
- `js/` - JavaScript Modules
- `images/` - Image Assets

---

<h2>‚öôÔ∏è VORAUSSETZUNGEN</h2>

<h3>Erforderlich:</h3>
- ‚úÖ <strong>Node.js</strong> (>= 18)
- ‚úÖ <strong>Cloudflare Wrangler CLI</strong>
  ```bash
  npm install -g wrangler
  ```
- ‚úÖ <strong>Git</strong>

<h3>Cloudflare Credentials:</h3>
Setze Umgebungsvariablen:
```bash
export CLOUDFLARE_ACCOUNT_ID="your-account-id"
export CLOUDFLARE_API_TOKEN="your-api-token"
```

<strong>Windows PowerShell:</strong>
```powershell
$env:CLOUDFLARE_ACCOUNT_ID = "your-account-id"
$env:CLOUDFLARE_API_TOKEN = "your-api-token"
```

<h3>Cloudflare Login:</h3>
```bash
wrangler login
```

---

<h2>üìù DEPLOYMENT-ABLAUF</h2>

<h3>Schritt 1: Pre-Deployment Checks</h3>
- ‚úÖ Node.js Version pr√ºfen
- ‚úÖ Cloudflare Wrangler installiert
- ‚úÖ Git verf√ºgbar
- ‚úÖ Credentials gesetzt

<h3>Schritt 2: Cloudflare Workers Deploy</h3>
- Workers werden einzeln deployed
- API-Endpoints werden aktiviert
- Health-Checks durchgef√ºhrt

<h3>Schritt 3: D1 Database Setup</h3>
- Schema wird angewendet
- Tabellen werden erstellt
- Indexes werden angelegt

<h3>Schritt 4: R2 Storage Setup</h3>
- Buckets werden erstellt/verifiziert
- Zugriffsrechte werden gesetzt

<h3>Schritt 5: GitHub Pages Deploy</h3>
- Dateien werden vorbereitet
- gh-pages Branch wird erstellt
- Push zu GitHub

<h3>Schritt 6: Frontend Assets</h3>
- Assets werden kopiert
- Verzeichnisse werden strukturiert

<h3>Schritt 7: Post-Deployment Verification</h3>
- Endpoints werden gepr√ºft
- Status wird verifiziert

---

<h2>üîß KONFIGURATION</h2>

<h3>wrangler.toml</h3>
Die Konfiguration ist in `DEPLOYMENT/wrangler.toml`:
- Worker-Namen
- D1 Database Bindings
- R2 Bucket Bindings
- Environment Variables
- Routes

<h3>D1 Database Setup</h3>
```bash
<h1>Liste aller Datenbanken</h1>
wrangler d1 list

<h1>Schema anwenden</h1>
wrangler d1 execute together-systems-db --file=./TELBANK/d1-schema-telbank-negative-assets.sql
```

<h3>R2 Bucket Setup</h3>
```bash
<h1>Bucket erstellen</h1>
wrangler r2 bucket create together-systems-assets
wrangler r2 bucket create together-systems-uploads
wrangler r2 bucket create together-systems-backups
```

---

<h2>üåê DEPLOYMENT-URLS</h2>

Nach erfolgreichem Deployment:

| Service | URL |
|---------|-----|
| <strong>GitHub Pages</strong> | `https://myopenai.github.io/togethersystems/` |
| <strong>Cloudflare Workers API</strong> | `https://api.togethersystems.com/` |
| <strong>TELBANK</strong> | `https://myopenai.github.io/togethersystems/TELBANK/` |
| <strong>Portal</strong> | `https://myopenai.github.io/togethersystems/manifest-portal.html` |

---

<h2>üìä DEPLOYMENT-REPORT</h2>

Nach jedem Deployment wird ein Report erstellt:
- `DEPLOYMENT/deployment-report.json`
- Enth√§lt: Timestamp, Status, Deployments, Errors

---

<h2>üêõ TROUBLESHOOTING</h2>

<h3>Problem: Cloudflare Wrangler nicht gefunden</h3>
```bash
npm install -g wrangler
wrangler login
```

<h3>Problem: D1 Database Fehler</h3>
```bash
<h1>Pr√ºfe ob Database existiert</h1>
wrangler d1 list

<h1>Erstelle Database falls n√∂tig</h1>
wrangler d1 create together-systems-db
```

<h3>Problem: GitHub Pages deploy failed</h3>
```bash
<h1>Pr√ºfe Git-Status</h1>
git status

<h1>Manuell zu gh-pages pushen</h1>
git checkout -b gh-pages
git push origin gh-pages
```

<h3>Problem: R2 Bucket Fehler</h3>
```bash
<h1>Pr√ºfe Buckets</h1>
wrangler r2 bucket list

<h1>Erstelle Bucket falls n√∂tig</h1>
wrangler r2 bucket create together-systems-assets
```

---

<h2>üîÑ CI/CD INTEGRATION</h2>

<h3>GitHub Actions (Optional):</h3>
```yaml
name: Deploy All Servers
on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
      - run: npm install -g wrangler
      - run: wrangler login --api-token ${{ secrets.CLOUDFLARE_API_TOKEN }}
      - run: cd DEPLOYMENT && ./deploy-all.sh
```

---

<h2>üìã CHECKLISTE</h2>

Vor Deployment:
- [ ] Node.js installiert
- [ ] Cloudflare Wrangler installiert
- [ ] Git verf√ºgbar
- [ ] Cloudflare Credentials gesetzt
- [ ] `wrangler login` durchgef√ºhrt

Nach Deployment:
- [ ] GitHub Pages erreichbar
- [ ] Cloudflare Workers funktionieren
- [ ] D1 Database schemas angewendet
- [ ] R2 Buckets erstellt
- [ ] Deployment-Report erstellt

---

<strong>Erstellt:</strong> 2025-01-15  
<strong>Version:</strong> 1.0.0-XXXL  
<strong>Branding:</strong> T,.&T,,.&T,,,.(C)TEL1.NL
</body>
</html>